/*! psdle 4.2.1 (c) RePod, MIT https://github.com/RePod/psdle/blob/master/LICENSE - min - compiled 2024-07-09 */
var psdleSkip=!0,repod={};repod.psdle={version:"4.2.1",versiondate:"2024-07-09",autocomplete_cache:[],gamelist:[],gamelist_cur:[],e_inject_cache:[],id_cache:{},lang:{},pid_cache:{},sys_cache:{},type_cache:{},prop_cache:[],lang_cache:{ar:{def:"ae",ae:{author:"Oakkom",rtl:!0,local:"العربية",startup:{apis:"أختار الميزات التي تَود استخدامها حَرك المؤشر فوقها للمزيد من المعاومات<br>بعضُ الميزات لا يُمكن ابطالها",wait:"...جَار التَحْميل",start:"إبدأ"},columns:{icon:"الأيقونة",name:"الأسم",platform:"نَوعُ الجهاز",size:"الحَجم",date:"التاريخ"},labels:{exportView:"أحْفَظ الائحة",page:"الصفْحة"},categories:{downloadable_game:"الألعاب",demo:"الإصدارات التجريبية",add_on:"العَناصِر الأضافية",unlock:"Unlocks",unlock_key:"Unlock Keys",avatar:"صٌور رمزية",theme:"السِمات",other:"اخرى",other_game_related:"ألعاب مُتَعلِقة",game_content:"مُحتويات اللعبة",tumbler_index:"فَهرس تَمبلر (tumbler)",home:"المَنزل",ungrouped_game:"العاب غير مصنفة",promo_content:"مُحتَويات تَرويجْية",beta:"اصْدار تجريبي",application:"التَطبيقات",extras:"إضافات",unknown:"مَجهول"},strings:{delimiter:":أدخل الفَواصل",yes:"نَعم",no:"لا",search:"أبْحث",dlQueue:"لائِحة التَنزيل",dlList:"لائِحة الألعاب",plus:"ضبط ظاهرية العاب PlayStation Plus",queueAll:"الكُل",queueTo:"حَمل الى $SYS$",noTarget:"لا يوجد جِهاز للتَحميل اِليه",exportColumnName:"أِسم العَمود",exportProperty:"الخَصائص"},apis:[{internalID:"api_entitle",name:"تَاريخ الشِراء",desc:"لا يُمكن عَدم التَفعيل, أِن بَيانات شِرائك تُستَعمل لِيَتم تَشكيل الائِحة و تَحديد وَضع PlayStation Plus"},{internalID:"api_game",name:"الفَهرس",desc:".فَعِلْ لِلحُصول على مَعلومات إضافية عَن الألعاب, مِنها الأنواع. تَزيد الوَقت اللازم لِتحميلِ اللائحة"},{internalID:"api_queue",name:"لائحة التَنزيل",desc:".تَسمح بِزيادة أو حَذف العَناصر مِن لائحة التَنزيل, تُظهر مَعلومات لائحة التَنزيل و عَدد الأجْهِزة المُفعَلة عَلى الحِساب"},{internalID:"api_pstv",name:"PS TV",desc:"الكشف عَن الألعاب لِجهَاز PS TV مُتوافر فَقط لِمَتجر  en-us",disabled:!0}]}},de:{def:"de",de:{local:"Deutsch",startup:{apis:"Wähle aus welche PS Store Funktionen du benutzen möchtest, fahre mit der Maus über die jeweiligen Menü-Einträge für weiter Informationen.<br>Bestimmte Store Funktionen sind möglicherweise ausgeschaltet.",wait:"Seite wird geladen, bitte warten.",start:"Starten"},columns:{icon:"Symbol",name:"Name",platform:"Plattform",size:"Größe",date:"Datum"},labels:{exportView:"Ansicht exportieren",page:"Seite"},categories:{downloadable_game:"Spiele",demo:"Demos",add_on:"Erweiterungen",unlock:"Freischaltbares",unlock_key:"Freischaltbare Schlüssel",avatar:"Spielerbilder",theme:"Designs",other:"Andere",home:"Startseite",promo_content:"promo_inhalt",beta:"Betas",application:"Anwendungen",extras:"Extras",unknown:"Unbekannt"},strings:{delimiter:"Geben sie ein Trennzeichen ein:",yes:"Ja",no:"Nein",search:"Suche",dlQueue:"Warteschlange",dlList:"Download-Liste",plus:"PS+ Inhalte sichtbar/unsichtbar machen",queueAll:"Alle",queueTo:"Herunterladen zu $SYS$",noTarget:"Es ist keine Ziel Konsole verfügbar.",exportColumnName:"Spalten-Name",exportProperty:"Eigenschaften",exportImport:"Importieren"},apis:[{internalID:"api_entitle",name:"Kaufverlauf",desc:"Kann nicht deaktiviert werden. Benutze den Kaufverlauf um die Download-Liste zu erstellen und den PlayStation Plus status festzustellen."},{internalID:"api_game",name:"Katalog",desc:"Einschalten für zusätzliche Spieleinformationen, inklusive Kategorien. Verlangsamt das Erstellen der Download-Liste."},{internalID:"api_queue",name:"Download-Warteschlange",desc:"Erlaubt das Hinzufügen und Entfernen von Titeln in der Download-Warteschlange. Liest die Download-Warteschlangeninformationen und den Aktivierungszustand der Konsole."},{internalID:"api_pstv",desc:'PS TV kompatible Titel wurden festgestellt. Wird nur unterstützt bei "en-us" Internet-Store (nicht die PSDLE Sprache).',disabled:!0}]}},en:{def:"us",us:{local:"English",startup:{apis:"Select which store features you would like to use, hover for more details.<br>Certain store features may not be disabled.",wait:"Please wait.",catalog:"Your browser may prompt you for storage permissions. PSDLE will use this to store Catalog responses for quicker and automatic startup.\n\nGranting permission is only required for these benefits.\n\nIf you run into issues or would like to you can revoke the persmission and clear the cache below the Start button.",start:"Start"},columns:{icon:"Icon",name:"Name",platform:"Platform",size:"Size",date:"Date"},labels:{exportView:"Export View",page:"Page"},categories:{downloadable_game:"Games",demo:"Demos",add_on:"Add-ons",unlock:"Unlocks",unlock_key:"Unlock Keys",avatar:"Avatars",theme:"Themes",other:"other",other_game_related:"other_game_related",game_content:"game_content",tumbler_index:"tumbler_index",home:"home",ungrouped_game:"ungrouped_game",promo_content:"promo_content",beta:"Betas",application:"Applications",extras:"Extras",unknown:"Unknown"},strings:{delimiter:"Enter separator:",yes:"Yes",no:"No",search:"Search",dlQueue:"Queue",dlList:"List",plus:"Toggle visibility of PS+ titles.",queueAll:"All",queueTo:"Download to $SYS$",noTarget:"There is no available target console to send to.",exportColumnName:"Column Name",exportProperty:"Property",exportImport:"Import"},apis:[{internalID:"api_entitle",name:"Purchase History",desc:"Cannot be disabled. Uses your purchase history to create the download list and determine PlayStation Plus status."},{internalID:"api_game",name:"Catalog",desc:"Enable for additional game information, including categories. Increases time needed to create the download list."},{internalID:"api_queue",name:"Download Queue",desc:"Allows adding and removing items from the download queue. Reads download queue information and console activation status."},{internalID:"api_pstv",name:"PS TV",desc:'Detect PS TV compatible titles. Only supported on "en-us" web store (not PSDLE language).',disabled:!0}]}},es:{def:"es",es:{author:"Positronic-Brain (#18)",local:"Español",startup:{apis:"Elija APIs a utilizar. Coloque el puntero sobre el API para visualizar detalles.<br>Algunos APIs no pueden ser deshabilitados.",wait:"Por favor espere...",start:"Inicio"},columns:{icon:"Ícono",name:"Nombre",platform:"Plataforma",size:"Tamaño",date:"Fecha"},labels:{exportView:"Exportar vista",page:"Página"},categories:{downloadable_game:"Juegos",demo:"Demos",add_on:"Complementos",unlock:"Desbloqueables",unlock_key:"Llaves",avatar:"Avatares",theme:"Temas",other:"Otros",other_game_related:"Otros",game_content:"Contenidos",tumbler_index:"tumbler_index",home:"Home",ungrouped_game:"No Clasificados",promo_content:"Promociones",beta:"Betas",application:"Aplicaciones",extras:"Extras",unknown:"Desconocido"},strings:{delimiter:"Ingrese delimitador:",yes:"Sí",no:"No",search:"Búsqueda",dlQueue:"Cola de Descargas",dlList:"Lista de Descargas",plus:"Alterna la visibilidad de los títulos de PS Plus.",queueAll:"Todos",queueTo:"Descargar a $SYS$"},apis:[{internalID:"api_entitle",name:"Licencias",desc:"No puede ser deshabilitado. Accede a la información de las compras y se utiliza para construir la lista de descargas, determinar el estado de PS Plus y otras cosas."},{internalID:"api_game",name:"Catálogo",desc:"Accede a información adicional para determinar la consola adecuada, reparar imágenes rotas, y más."},{internalID:"api_queue",name:"Cola de Descargas",desc:"Permite añadir y remover entradas a la cola de descargas. Lee la información de la cola de descargas y el número de consolas activadas en la cuenta."},{internalID:"api_pstv",name:"PS TV",desc:'Detecta títulos compatibles con PS TV. Sólo soportado en la tienda de la región "en-us" (región, no idioma de PSDLE).',disabled:!0}]}},fr:{def:"fr",fr:{author:"cramoisan (#9)",local:"Français",startup:{apis:"Sélectionner l'API à utiliser; Survoler pour plus de détails.<br>Certaines APIs ne peuvent pas être désactivées.",wait:"Merci de patienter.",start:"Commencer"},columns:{icon:"Icône",name:"Nom",platform:"Plate-forme",size:"Taille",date:"Date"},labels:{exportView:"Exporter la vue",page:"Page"},categories:{downloadable_game:"Jeux",demo:"Démos",add_on:"DLCs",unlock:"Codes de déverouillage",avatar:"Avatars",theme:"Thèmes",application:"Applications",unknown:"Inconnu"},strings:{delimiter:"Entrer le délimiteur:",yes:"Oui",no:"Non",search:"Rechercher",dlQueue:"Queue",dlList:"Liste",plus:"Afficher/cacher les titres PS+.",queueAll:"Tous",queueTo:"Télécharger sur $SYS$"},apis:[{internalID:"api_entitle",name:"Droits",desc:"Ne peut pas être désactivée. Accède aux informations d'achat afin de créer la liste de téléchargement, et déterminer le statut PS+, ainsi que d'autres choses."},{internalID:"api_game",name:"Catalogue",desc:"Accède aux informations supplémentaires des jeux pour déterminer la plate-forme, corriger les liens d'images cassés, et plus."},{internalID:"api_queue",name:"Liste de téléchargement",desc:"Permet d'ajouter ou de retirer des articles de la liste de téléchargement. Lit les informations de la liste de téléchargement et le nombre de consoles activées sur le compte."},{internalID:"api_pstv",name:"PS TV",desc:'Détecte les titres compatibles PS TV. Ne marche que sur le store "en-us" (différent de la langue choisie pour PSDLE).',disabled:!0}]}},ja:{def:"jp",jp:{author:"k0ta0uchi (#36)",local:"日本語",startup:{apis:"使用したいAPIを選択してください。ホバーすることによって詳細を確認することができます。<br>特定のAPIは無効化することが出来ない可能性があります。",wait:"お待ちください。",start:"開始"},columns:{icon:"アイコン",name:"ゲーム名",platform:"プラットフォーム",size:"サイズ",date:"日付"},labels:{exportView:"ビューをエクスポート",page:"ページ"},categories:{downloadable_game:"ゲーム",demo:"デモ",add_on:"アドオン",unlock:"アンロック",unlock_key:"アンロックキー",avatar:"アバター",theme:"テーマ",other:"その他",other_game_related:"その他ゲーム関連",game_content:"ゲームコンテンツ",tumbler_index:"タンブラーインデックス",home:"ホーム",ungrouped_game:"未分類のゲーム",promo_content:"プロモコンテンツ",beta:"ベータ",application:"アプリケーション",extras:"エキストラ",unknown:"不明"},strings:{delimiter:"区切り文字を入力してください:",yes:"はい",no:"いいえ",search:"検索",dlQueue:"待機リスト",dlList:"リスト",plus:"PS＋タイトルの表示を切り替える。",queueAll:"全て",queueTo:"$SYS$にダウンロード",noTarget:"送信可能なコンソールが存在しません。",exportColumnName:"カラム名",exportProperty:"プロパティ"},apis:[{internalID:"api_entitle",name:"エンタイトルメント",desc:"無効化することは出来ません。購入情報にアクセスし、ダウンロードリストを作成、PS+の状態を確認、その他を行います。"},{internalID:"api_game",name:"カタログ",desc:"ゲームの追加情報にアクセスし、正確なコンソールの把握、壊れたイメージの修正、その他を行います。"},{internalID:"api_queue",name:"ダウンロード待機リスト",desc:"ダウンロード待機リストからアイテムの追加や削除の許可します。ダウンロード待機リスト情報とアカウントで有効化されたコンソールの数を読み込みます。"},{internalID:"api_pstv",name:"PS TV",desc:'PS TV互換タイトルを検知します。"en-us"ウェブストアでのみサポートされます。（PSDLEの言語設定ではありません）',disabled:!0}]}},nl:{def:"nl",nl:{author:"Tricksy",local:"Nederlands",startup:{apis:"Selecteer welke APIs je wilt gebruiken, hover voor meer details.<br>Sommige APIs kunnen niet gedeselecteerd worden.",wait:"Even geduld alstublieft.",start:"Start"},columns:{icon:"Icoon",name:"Naam",platform:"Platform",size:"Grootte",date:"Datum"},labels:{exportView:"Exporteer View",page:"Pagina"},categories:{downloadable_game:"Spellen",demo:"Demos",add_on:"Add-ons",unlock:"Ontgrendelingen",unlock_key:"Ontgrendelings Sleutels",avatar:"Avatars",theme:"Themas",other:"anders",other_game_related:"ander_spel_gerelateerd",game_content:"spel_inhoud",tumbler_index:"tumbler_index",home:"begin",ungrouped_game:"ongegroepeerd_spel",promo_content:"promo_inhoud",beta:"Betas",application:"Applicaties",extras:"Extras",unknown:"Onbekend"},strings:{delimiter:"Voer delimiter in:",yes:"Ja",no:"Nee",search:"Zoeken",dlQueue:"Wachtrij",dlList:"Lijst",plus:"Laat PS+ titels zien.",queueAll:"Alles",queueTo:"Download naar $SYS$",noTarget:"Er is geen beschikbare console om naar toe te sturen",exportColumnName:"Kolom Naam",exportProperty:"Inhoud"},apis:[{internalID:"api_recht",name:"Rechten",desc:"Kan niet uitgeschakeld worden. Geeft toegang tot betalings informatie om te gebruiken voor de download lijst, bepaald PS+ status, en meer."},{internalID:"api_spel",name:"Catalogus",desc:"Geeft toegang tot extra spel informatie om de goede console te bepalen, kapotte images te fixen, en meer."},{internalID:"api_wachtrij",name:"Download Wachtrij",desc:"Geeft toegang tot het toevoegen en verwijderen van spellen op de download wachtrij. Leest de download wachtrij informatie en het aantal geactiveerde consoles op het account."},{internalID:"api_pstv",name:"PS TV",desc:'Detecteert titels die met PS TV werken. Werkt alleen op de "en-us" web store (niet PSDLE taal).',disabled:!0}]}},pl:{def:"pl",pl:{local:"Polski",startup:{apis:"Zaznacz wybrane opcje; najedź kursorem, aby uzyskać więcej szczegółów.<br>Niektóre opcje nie mogą być odznaczone.",wait:"Proszę czekać.",start:"Start"},columns:{icon:"Ikona",name:"Nazwa",platform:"Platforma",size:"Rozmiar",date:"Data"},labels:{exportView:"Eksportuj",page:"Strona"},categories:{downloadable_game:"Gry",demo:"Dema",add_on:"Dodatki",unlock:"Odblokowane",unlock_key:"Kody",avatar:"Awatary",theme:"Motywy",other:"inne",other_game_related:"inne_związane_z_grami",game_content:"zawartość_gry",tumbler_index:"znacznik",home:"dom",ungrouped_game:"nieprzypisana_gra",promo_content:"zawartość_promocyjna",beta:"Bety",application:"Aplikacje",extras:"Zawartość dodatkowa",unknown:"Nieznane"},strings:{delimiter:"Wstaw separator:",yes:"Tak",no:"Nie",search:"Szukaj",dlQueue:"Kolejka",dlList:"Lista",plus:"Zmień widoczność tytułów PS+.",queueAll:"Wszystko",queueTo:"Pobierz do $SYS$",noTarget:"Nie ma dostępnej konsoli, do której można by wysłać zawartość.",exportColumnName:"Nazwa Kolumny",exportProperty:"Własność",exportImport:"Importuj"},apis:[{internalID:"api_entitle",name:"Historia Zakupów",desc:"Nie może być odznaczona. Historia zakupów zostanie użyta do stworzenia listy objektów do pobrania i określenia, czy jest to zawartość z PS+."},{internalID:"api_game",name:"Katalog",desc:"Zaznaczenie umożliwi podanie dodatkowych informacji, w tym kategorii. Zwiększa czas potrzebny na utworzenie listy."},{internalID:"api_queue",name:"Kolejka pobierania",desc:"Umożliwia dodawanie i usuwanie objektów z kolejki pobierania. Odczytuje informacje o stanie kolejki i sprawdza, czy kosola jest aktywna."},{internalID:"api_pstv",name:"PS TV",desc:'Wykrywanie tytułów kompatybilnych z PS TV. Dostępne wyłącznie na stronie w języku "en - us" (nie w języku PSDLE).',disabled:!0}]}},pt:{def:"br",br:{author:"msvalle (#33)",local:"Português (Brasil)",startup:{apis:"Selecione quais APIs você gostaria de usar, passe o mouse por cima para mais detalhes.<br>Algumas APIs não podem ser desabilitadas.",wait:"Por favor aguarde.",start:"Iniciar"},columns:{icon:"Ícone",name:"Nome",platform:"Platforma",size:"Tamanho",date:"Data"},labels:{exportView:"Exportar Visualização",page:"Página"},categories:{downloadable_game:"Jogos",demo:"Demos",add_on:"Expansões",unlock:"Desbloqueáveis",unlock_key:"Chaves",avatar:"Avatarws",theme:"Temas",other:"Outros",other_game_related:"Outros",game_content:"Conteúdo",tumbler_index:"tumbler_index",home:"Home",ungrouped_game:"Não classificado",promo_content:"Promoções",beta:"Betas",application:"Aplicações",extras:"Extras",unknown:"Desconhecido"},strings:{delimiter:"Entre delimitador:",stringify_error:"Erro: Navegador não possui JSON.stringify.",yes:"Sim",no:"Não",search:"Buscar por título do jogo",dlQueue:"Fila de downlaod",dlList:"Lista de download",plus:"Alterna ver títulos PS+.",queueAll:"Todos",queueTo:"Download para $SYS$"},apis:[{internalID:"api_entitle",name:"Licenças",desc:"Não pode ser desabilitado. Acessa informção de compra usada para criar a lista de download, determinar o status da PS+, e outras coisas."},{internalID:"api_game",name:"Catálogo",desc:"Acessa informação adicional do jogo para determinar o console certo, corrigir imagens quebradas, e mais."},{internalID:"api_queue",name:"Fila de download",desc:"Permite adicionar e remover itens da lista de download. Lê informação da lista de download e quantidade de consoles ativos na conta."},{internalID:"api_pstv",name:"PS TV",desc:'Detecta títulos compatíveis com a PS TV. Somente suportado na web store "en-us" (não o idioma do PSDLE).',disabled:!0}]}},ru:{def:"ru",ru:{author:"GenosseArroganz",local:"Русский",startup:{apis:"Выберите необходимые компоненты (для описания наведите на них указатель мыши).<br>Некоторые компоненты обязательны и не могут быть отключены.",wait:"Подождите…",start:"Начать!"},columns:{icon:"Иконка",name:"Название",platform:"Платформа",size:"Размер",date:"Дата"},labels:{exportView:"Экспорт списка",page:"Страница"},categories:{downloadable_game:"Игры",demo:"Демо",add_on:"Дополнения",unlock:"Разблокировки",unlock_key:"Ключи разблокировки",avatar:"Аватары",theme:"Темы",other:"Другое",other_game_related:"Другой связанный контент",game_content:"Игровой контент",tumbler_index:"tumbler_index",home:"PlayStation Home",ungrouped_game:"Без категории",promo_content:"Промо-материалы",beta:"Бета",application:"Приложения",extras:"Дополнительно",unknown:"Неизвестно"},strings:{delimiter:"Введите разделитель:",yes:"Да",no:"Нет",search:"Поиск",dlQueue:"Очередь загрузок",dlList:"Список загрузок",plus:"Скрыть/показать игры PS+",queueAll:"Все",queueTo:"Загрузить на $SYS$",noTarget:"Не обнаружено подходящего устройства",exportColumnName:"Название столбца",exportProperty:"Свойство"},apis:[{internalID:"api_entitle",name:"История покупок",desc:"Нельзя отключить. История ваших покупок используется для создания списка загрузок и определения статуса PlayStation Plus."},{internalID:"api_game",name:"Каталог",desc:"Больше опций отображения списка, включая категории. Увеличивает время, необходимое для подготовки списка загрузок."},{internalID:"api_queue",name:"Очередь загрузок",desc:"Возможность формировать очередь загрузок. Доступ к информации об очереди загрузок и активированных консолях на аккаунте."},{internalID:"api_pstv",name:"PS TV",desc:"Определяет совместимые с PS TV игры и приложения. Только для американского магазина.",disabled:!0}]}},zh:{def:"tw",tw:{author:"Alexsh",local:"中文 (繁體)",startup:{apis:"請選擇要使用的PS Store功能，滑鼠游標停留以取得項目的詳細資訊<br>部份功能可能無法關閉",wait:"請稍候...",start:"開始"},columns:{icon:"圖示",name:"名稱",platform:"平台",size:"容量",date:"購買日期"},labels:{exportView:"匯出",page:"Page"},categories:{downloadable_game:"遊戲",demo:"體驗版",add_on:"追加內容",unlock:"關卡",unlock_key:"解鎖",avatar:"個人造型",theme:"主題",other:"other",other_game_related:"other_game_related",game_content:"game_content",tumbler_index:"tumbler_index",home:"home",ungrouped_game:"ungrouped_game",promo_content:"promo_content",beta:"Betas",application:"應用程式",extras:"Extras",unknown:"Unknown"},strings:{delimiter:"分隔字元:",yes:"是",no:"否",search:"搜尋",dlQueue:"佇列",dlList:"清單",plus:"選擇顯示PS+遊戲",queueAll:"全部",queueTo:"下載到$SYS$",noTarget:"沒有可傳送的主機。",exportColumnName:"欄位名稱",exportProperty:"屬性"},apis:[{internalID:"api_entitle",name:"購買記錄",desc:"此項不可關閉，將使用購買記錄來建立下載清單及確認PlayStation Plus狀態。"},{internalID:"api_game",name:"類別",desc:"開啟以取得更多遊戲資訊，包括類別及購買時間來建立下載清單。"},{internalID:"api_queue",name:"下載佇列",desc:"允許從下載佇列增加/移除項目。"},{internalID:"api_pstv",name:"PS TV",desc:"偵測Playstation Vita TV相容遊戲。目前只支援en-us區域",disabled:!0}]},cn:{author:"Alexsh",local:"中文 (简体)",startup:{apis:"请选择要使用的PS Store功能，鼠标光标停留以取得项目的详细信息<br>部份功能可能无法关闭",wait:"请稍候...",start:"开始"},columns:{icon:"图示",name:"名称",platform:"平台",size:"容量",date:"购买日期"},labels:{exportView:"汇出",page:"Page"},categories:{downloadable_game:"游戏",demo:"体验版",add_on:"追加内容",unlock:"关卡",unlock_key:"解锁",avatar:"个人造型",theme:"主题",other:"other",other_game_related:"other_game_related",game_content:"game_content",tumbler_index:"tumbler_index",home:"home",ungrouped_game:"ungrouped_game",promo_content:"promo_content",beta:"Betas",application:"应用程序",extras:"Extras",unknown:"Unknown"},strings:{delimiter:"分隔字符:",yes:"是",no:"否",search:"搜寻",dlQueue:"队列",dlList:"清单",plus:"选择显示PS+游戏",queueAll:"全部",queueTo:"下载到$SYS$",noTarget:"没有可传送的主机。",exportColumnName:"域名",exportProperty:"属性"},apis:[{internalID:"api_entitle",name:"购买记录",desc:"此项不可关闭，将使用购买记录来建立下载列表及确认PlayStation Plus状态。"},{internalID:"api_game",name:"类别",desc:"开启以取得更多游戏信息，包括类别及购买时间来建立下载清单。"},{internalID:"api_queue",name:"下载队列",desc:"允许从下载队列增加/移除项目。"},{internalID:"api_pstv",name:"PS TV",desc:"侦测Playstation Vita TV兼容游戏。目前只支持en-us区域",disabled:!0}]}}},determineLanguage:function(e,t){return e=e?e.split("-"):this.config.language.split("-"),!0===t&&(this.lang={},this.lang=$.extend(!0,{},this.lang_cache.en.us)),e[0]in this.lang_cache?e.slice(-1)in this.lang_cache[e[0]]?(!0===t&&($.extend(!0,this.lang,this.lang_cache[e[0]][e.slice(-1)]),this.sanitizeLanguage()),e=e[0]+"-"+e.slice(-1)):(!0===t&&($.extend(!0,this.lang,this.lang_cache[e[0]][this.lang_cache[e[0]].def]),this.sanitizeLanguage()),e=e[0]+"-"+this.lang_cache[e[0]].def):e="en-us",e},sanitizeLanguage:function(){var e=JSON.stringify(this.lang,function(e,t){return"string"==typeof t?t.replace(/'/g,"&apos;"):t});this.lang=JSON.parse(e)},generateLangBox:function(e){var t=this,a="<select id='lang_select'>";for(var o in e=e?this.determineLanguage(e):this.determineLanguage(),this.lang_cache)for(var n in this.lang_cache[o]){if(this.lang_cache[o][n].local)a+="<option "+(e==o+"-"+n?"selected='selected'":"")+" value='"+o+"-"+n+"'>"+this.lang_cache[o][n].local+" ["+o+"-"+n+"]</option>"}return a+="</select>",$(a).on("change",function(){t.config.language=$(this).val(),t.determineLanguage($(this).val(),!0),t.container.go("startup")})},config:{timerID:0},init:function(){console.log("PSDLE | Init.");var e=window.location.pathname.match(/^\/([a-z\-]+)\//i),t=(null!==e&&e.length>1?e.pop():"en-us").toLowerCase(),a=t.split("-"),o=Ember.Application.NAMESPACES_BY_ID.psst.__container__;this.config=$.extend(this.config,{valkyrieInstance:o,game_page:window.location.origin+"/"+t+"/product/",game_api:"https://store.playstation.com/store/api/chihiro/00_09_000/container/"+a.slice(-1)+"/"+a[0]+"/999/",lastsort:"",lastsort_r:!1,language:t,deep_search:!1,last_search:"",dlQueue:!1,active_consoles:{},has_plus:!1,check_tv:!1,iconSize:42,mobile:!1,includeExpired:!0}),console.log("PSDLE | Config set."),this.determineLanguage(this.config.language,!0),this.injectCSS(),this.genStartup()},genStartup:function(){if(0==$("#psdle_start").length){var e=this;1==(window.psdleSkip||!1)?this.container.go("startup"):$("<div/>",{class:"psdle_logo startup"}).click(function(){$(this).remove(),e.container.go("startup")}).prependTo("#psst")}},container:{elemID:"muh_games_container",subElemID:"sub_container",go:function(e,t){switch(e){default:case"startup":this.respawn(this.startup());break;case"progress":this.respawn(this.progress());break;case"dlList":this.respawn(this.dlList().append(this.tagline()),function(){repod.psdle.table.regen(!0),repod.psdle.table.margin()});break;case"dlQueue":repod.psdle.dlQueue.generate.display()}},respawn:function(e,t){var a=this;0==$("#"+this.elemID).length&&$("<div />",{id:this.elemID,class:"valkyrie"}).appendTo("body"),$("#"+this.elemID).slideUp(function(){$(this).children().remove(),e.append($("<button />",{class:"page-header__close-button psdleClose"}).on("click",function(){$("#muh_games_container").slideUp(function(){$(this).remove()})})),$(this).append(e).toggleClass("psdledark",a.dark).toggleClass("rtl",!!repod.psdle.lang.rtl&&1==repod.psdle.lang.rtl).slideDown(function(){"function"==typeof t&&t()})})},dark:!1,darkCSS:function(){this.dark=!this.dark,$("#"+this.elemID).toggleClass("psdledark",this.dark)},header:function(){return"<span><a href='//repod.github.io/psdle/' target='_blank'><div class='psdle_logo'></div></a><br><small>v"+repod.psdle.version+" <small>"+repod.psdle.versiondate+" (Valkyrie)</small></small></span>"},tagline:function(){var e=this,t=$("<div />",{class:"psdle tagline"});return t.append($("<span />",{id:"psdle_night",text:"Night Mode"}).on("click",function(){e.darkCSS()})).append("<br><a href='//repod.github.io/psdle#support' target='_blank'>Support PSDLE</a> | <a href='//github.com/RePod/psdle/wiki/Submit-a-Bug-or-Translation' target='_blank'>Submit Bug/Translation</a> | ").append($("<span />",{id:"dump_raw",text:"Dump Raw"}).on("click",function(){repod.psdle.macrossBrain(function(e){repod.psdle.exportList.download("_raw.json",JSON.stringify(e))})})).append(" | ").append($("<span />",{id:"load_raw",text:"Load Raw"}).on("click",function(){try{$("<input>",{type:"file",accept:".txt,.json"}).change(function(e){var t=new FileReader;t.onload=function(){console.log(t.result),window.psdleEnts=JSON.parse(t.result)},t.readAsText(e.currentTarget.files[0])}).click()}catch(e){alert(e)}})).append(" | ").append($("<span />",{id:"inject_lang",text:"Inject Language"}).on("click",function(){repod.psdle.debug.inject_lang()})),t},startup:function(){var e=repod.psdle.config,t=repod.psdle.lang,a=$("<div />",{id:this.subElemID}).append(this.header()).append("<br><br>"+t.startup.apis+"<br><br>"),o=$("<span />",{class:"psdle_fancy_bar"});$.each(t.apis,function(e,a){return"api_entitle"!==a.internalID?0:"api_pstv"==a.internalID?0:void $("<span />",{id:a.internalID,class:"api_game"==a.internalID&&"true"!==localStorage.catalog||a.disabled?"toggled_off":"","data-tooltip":a.desc.replace(/'/g,"&apos;"),text:a.name.replace(/'/g,"&apos;")}).on("click",function(){"api_entitle"!==$(this).attr("id")&&$(this).toggleClass("toggled_off"),"api_game"!=$(this).attr("id")||$(this).hasClass("toggled_off")||alert(t.startup.catalog)}).appendTo(o)});var n=$("<span />",{id:"psdle_go",class:"psdle_btn",text:t.startup.start}).on("click",function(){e.check_tv=!!$("#api_pstv").length&&!$("#api_pstv").hasClass("toggled_off"),repod.psdle.generateList()});return a.append(o).append("<br><br>").append(n).append("<br>").append(repod.psdle.generateLangBox()).append("<br><br>").append(this.tagline()),a},progress:function(){return $("<div />",{id:this.subElemID}).append(this.header()+"<br>").append($("<progress />",{id:"startup_progress"})).append("<br><span id='psdle_status'>"+repod.psdle.lang.startup.wait+"</span>")},postRuns:{},postList:function(e){if(e&&(this.postRuns[e]=!0),repod.psdle.config.check_tv&&!0!==this.postRuns.tv)return this.go("progress"),void repod.psdle.tv.init();repod.psdle.config.deep_search&&!0!==this.postRuns.catalog?this.go("progress"):(repod.psdle.config.dlQueue&&repod.psdle.dlQueue.batch.init(),this.go("dlList"))},dlList:function(){return repod.psdle.genSysCache(),repod.psdle.genPropCache(),repod.psdle.config.lastsort="",repod.psdle.config.lastsort_r=!1,repod.psdle.table.gen()},menu:{gen:function(e){var t=$("<div />",{class:"menu"});return t.append(this.dlList()),t},dlList:function(){var e=repod.psdle.lang,t=$("<div />",{text:e.labels.exportView}),a=[this.helpers.auto_systems()];return repod.psdle.config.deep_search&&a.push(this.helpers.auto_categories()),$.each(a,function(e,a){var o=$("<fieldset />");$.each(a,function(e,t){o.append(t)}),o.appendTo(t)}),t},helpers:{genCheckbox:function(e,t,a){return $("<label />",{text:a}).prepend($("<input />",{type:"checkbox",checked:"checked",name:e,value:t}))},auto_systems:function(){var e=this,t=repod.psdle.sys_cache,a=[];return $.each(["ps1","ps2","ps3","ps4","ps5","vr","psp","vita","ps_plus_required"],function(o,n){t.hasOwnProperty(n)&&a.push(e.genCheckbox("system",n,t[n]))}),a},auto_categories:function(){var e=this,t=repod.psdle.lang,a=repod.psdle.type_cache,o=["downloadable_game","demo","unlock","add_on","avatar","application","theme","unknown"],n=[];return $.each(a,function(a){var i=e.genCheckbox("category",a,t.categories[a]||a);o.indexOf(a)>=0?o[o.indexOf(a)]=i:n.push(i)}),o.concat(n)}}}},rawEntitlements:[],macrossBrain:function(e){var t=this;query=window.GrandCentralCore.createQueryString({start:this.rawEntitlements.length,size:450,fields:"meta_rev,cloud_meta,reward_meta,game_meta,drm_def,drm_def.content_type,title_meta,product_meta",revisionId:0,metaRevisionId:0}),this.config.valkyrieInstance.lookup("service:entitlements")._buildApiPromise("fetchInternalEntitlements","GET","internal_entitlements",query).then(function(a){console.log("PSDLE | Fetching Entitlements",t.rawEntitlements,a),t.rawEntitlements=t.rawEntitlements.concat(a.entitlements),void 0==a.entitlements||a.entitlements.length<=450&&t.rawEntitlements.length>=a.total_results?e(t.rawEntitlements):t.macrossBrain(e)})},generateList:function(e){var t=this;if(e=window.psdleEnts||e){e=e.filter(e=>null!==e),console.log("PSDLE | Generating download list.",e),this.gamelist=[];this.config.valkyrieInstance.lookup("service:intl");var a=this.config.valkyrieInstance.lookup("service:moment"),o=(e=(e||this.config.valkyrieInstance.lookup("service:macross-brain").macrossBrainInstance._entitlementStore._storage._entitlementMapCache).concat(this.e_inject_cache),0);$.each(e,function(e,n){if(t.isValidContent(n)){var i={};i.indexRaw=++e,i.indexValid=++o,i.productID=n.product_id,i.id=n.id,t.config.deep_search&&(i.category="unknown"),t.pid_cache[i.productID]?t.pid_cache[i.productID]++:t.pid_cache[i.productID]=1,void 0!==n.drm_def?(i.name=n.drm_def.contentName?n.drm_def.contentName:n.drm_def.drmContents[0].titleName?n.drm_def.drmContents[0].titleName:"Unknown! - Submit a bug report!",i.api_icon=n.drm_def.image_url,i.size=n.drm_def.drmContents[0].contentSize,i.platform=[],i.baseGame=n.drm_def.drmContents[0].titleName,i.publisher=n.drm_def.drmContents[0].spName,i.pkg=n.drm_def.drmContents[0].contentUrl,i.platform=t.determineSystem(n.drm_def.drmContents[0].platformIds)):n.game_meta&&(i.name=n.game_meta.name,i.api_icon=n.product_meta?n.product_meta.image_url:"",i.size=0,i.platform=void 0!==n.game_meta.type?"PSGD"==n.game_meta.type?["PS5"]:["PS4"]:"PS_PLUS_REQUIRED"),i.icons=[i.api_icon,t.config.game_api+i.id+"/image",t.config.game_api+i.productID+"/image"],i.date=n.active_date||new Date(n.revision_id).toISOString();var r=a.moment(i.date);i.prettyDate=r.format("L"),i.dateUnix=r.unix();i.prettySize=i.size||"N/A",i.url=repod.psdle.config.game_page+i.productID,i.platformUsable=i.platform.slice(0),!n.drm_def&&n.inactive_date&&(i.plus=!0),n.license&&n.license.expiration&&(i.plus=!0),i.plus&&(t.config.has_plus=!0),t.gamelist.push(i)}}),this.gamelist.sort(function(e,t){return e.date>t.date?-1:e.date<t.date?1:0}),$.each(this.pid_cache,function(e,a){a>1||delete t.pid_cache[e]}),$.each(this.gamelist,function(e,a){t.gamelist[e].index=e+1,t.config.deep_search}),console.log("PSDLE | Finished generating download list. End result is "+this.gamelist.length+" of "+e.length+" item(s).",this.stats),repod.psdle.container.postList()}else this.macrossBrain(function(e){t.generateList(e)})},determineSystem:function(e){var t=[],a={PS4:"PS4",PS3:"PS3",PSVITA:"PS Vita",PSP:"PSP"},o={PS3:2147483648,PSP:1073741824,PSVITA:134217728};return $.each(o,function(o,n){var i=a[o];0!=("1"==o?e>>>1&n>>>1:e&n)&&t.push(i)}),t},stats:{fine:0,generic:0,expired:0,service:0,video:0},isValidContent:function(e){if(void 0==e)return 0;var t=e.license?e.license.expiration:e.inactive_date,a=!!e.license&&e.license.infinite_duration;return!this.config.includeVideo&&(e.VUData||e.drm_def&&"TV"==e.drm_def.contentType)?(this.stats.video++,0):1==e.entitlement_type||4==e.entitlement_type||1==e.serviceType?(this.stats.service++,0):0==a&&!0!==this.config.includeExpired&&new Date(t)<new Date?(this.stats.expired++,0):e.drm_def||e.game_meta?(this.stats.fine++,1):(this.stats.generic++,0)},genSysCache:function(){var e=this;$.each(this.gamelist,function(t,a){var o=e.safeGuessSystem(a.platform),n=o.toLowerCase().replace("ps ","");e.sys_cache[n]=o})},genPropCache:function(){var e=this,t=["metadata"];this.prop_cache=["empty"],$.each(this.gamelist,function(a,o){$.each(o,function(a){-1==$.inArray(a,t)&&-1==$.inArray(a,e.prop_cache)&&e.prop_cache.push(a)})}),this.prop_cache.push("vitaCompat"),this.config.check_tv&&this.prop_cache.push("vitatvCompat"),this.prop_cache.sort()},table:{bindSearch:function(){$(document).off("click","[id^=psdle_index_]").on("click","[id^=psdle_index_]",function(e){e.preventDefault(),e.shiftKey?repod.psdle.dlQueue.batch.auto(this):repod.psdle.dlQueue.batch.add.ask(this)})},gen:function(){$("#muh_games_container").css({position:"absolute"});var e=$("<div />",{id:repod.psdle.container.subElemID}).append(this.header.gen()).append("<div class='psdle_table'><table><thead><tr><th>"+repod.psdle.lang.columns.icon+"</th><th id='sort_name'>"+repod.psdle.lang.columns.name+"</th><th title='Approximate, check store page for all supported platforms.'>"+repod.psdle.lang.columns.platform+"</th><th id='sort_size'>"+repod.psdle.lang.columns.size+"</th><th id='sort_date'>"+repod.psdle.lang.columns.date+"</th></tr></thead><tbody></tbody></table></div>");return e.find("th[id^=sort_]").on("click",function(){repod.psdle.sortGamelist($(this))}),this.bindSearch(),console.log("PSDLE | Table generated."),e},header:{newSearch:{gen:function(){var e=$("<div />",{class:"search options container"}),t=this.helpers.auto_systems(this.children.filter);if($.each(t,function(t,a){e.append(a)}),repod.psdle.config.deep_search){var a=this.helpers.auto_categories(this.children.filter);$.each(a,function(t,a){e.append(a)})}return e.prepend(this.children.input()),e},helpers:{auto_systems:function(e){var t=repod.psdle.sys_cache,a=[];return $.each(["ps1","ps2","ps3","ps4","vr","psp","vita","ps_plus_required"],function(o,n){t.hasOwnProperty(n)&&a.push(e(t[n],{type:"system"}))}),a},auto_categories:function(e){var t=repod.psdle.lang,a=repod.psdle.type_cache,o=["downloadable_game","demo","unlock","add_on","avatar","application","theme","unknown"];return $.each(a,function(a){var n=e(t.categories[a]||a,{type:"category",target:a});o.indexOf(a)>=0?o[o.indexOf(a)]=n:o.push(n)}),o}},bind:function(){},children:{input:function(){var e=this;return $("<input />",{class:"search options syntax"}).on("keypress",function(t){13==t.keyCode&&$(t.target.parentNode).append(e.filter(t.target.value))})},filter:function(e,t){var a=$("<div />",{class:"search options filter container"});t&&t.type&&a.addClass(t.type);var o=$("<div />",{class:"search options filter close",text:"X"}).on("click",function(e){e.target.parentNode.remove()}),n=$("<div />",{class:"search options filter value",text:e});return a.prepend(o).append(n)[0]}}},gen:function(e){return $("<div />",{class:"search main container"}).append(this.searchOptions(e)).append(this.stats(e))},searchOptions:function(e){var t=$("<div />",{class:"search options container"}),a=repod.psdle.lang,o=function(){$(this).toggleClass("toggled_off"),repod.psdle.table.regen(!0)};e||t.append($("<span />",{class:"psdle_fancy_bar"}).append($("<span />",{id:"export_view",text:a.labels.exportView}).on("click",function(){repod.psdle.exportList.configure()})));var n=$("<span />",{class:"psdle_fancy_bar search options system"}),i=["ps1","ps2","ps3","ps4","ps5","vr","psp","vita","ps_plus_required"];if($.each(i,function(e,t){repod.psdle.sys_cache.hasOwnProperty(t)&&$("<span />",{id:"system_"+t,text:repod.psdle.sys_cache[t]}).on("click",o).appendTo(n)}),n.appendTo(t),repod.psdle.config.dlQueue){var r=e?"dl_list":"dl_queue",s=e?"dlList":"dlQueue",l=a.strings[s];$("<span />",{class:"psdle_fancy_but",id:r,text:l}).on("click",function(){repod.psdle.container.go(s)}).appendTo(t)}if(!e&&repod.psdle.config.deep_search){var d=$("<div />",{class:"psdle_fancy_bar search options categories"});i=["downloadable_game","demo","unlock","add_on","avatar","application","theme","unknown"];$.each(repod.psdle.type_cache,function(e){var t=$("<span />",{id:"filter_"+e,text:a.categories[e]||e}).on("click",o);i.indexOf(e)>=0?i[i.indexOf(e)]=t:i.push(t)}),$.each(i,function(e,t){"object"==typeof t&&t.appendTo(d)}),d.appendTo(t)}if(!e){var p=$("<div />"),c=$("<select />",{id:"psdle_search_select",class:"search input select"}),u={name:a.columns.name,base:"Base Game",publisher:"Publisher",id:"Item ID",pid:"Product ID"};repod.psdle.config.deep_search&&(u.genre="Genre"),$.each(u,function(e,t){$("<option />",{value:e,text:t}).appendTo(c)}),c.on("change",function(){repod.psdle.table.regen(!0)}).appendTo(p),$("<input />",{id:"psdle_search_text",class:"search input text",type:"text",list:"searchAutocomplete",placeholder:a.strings.search}).on("blur keypress",function(e){("keypress"!=e.type||13===e.which&&$(this).is(":focus"))&&repod.psdle.table.regen(!0)}).appendTo(p),$("<datalist />",{id:"searchAutocomplete"}).appendTo(p),p.appendTo(t)}return t},stats:function(e){if(!e){var t=$("<span />",{class:"search stats all current"}),a=$("<span />",{class:"search stats all total"}),o=$("<input />",{type:"checkbox",class:"search input plus",readonly:!0}).prop({indeterminate:!0}).click(function(){this.readOnly?this.checked=this.readOnly=!1:this.checked||(this.readOnly=this.indeterminate=!0),repod.psdle.table.regen(!0)}),n=$("<span />",{class:"search stats plus","data-tooltip":repod.psdle.lang.strings.plus}).append("(").append(o).append(" ").append($("<span />",{class:"search stats plus total"})).append(")");return $("<div />",{class:"psdleSearchStats"}).append(t).append(" ").append(n).append(" / ").append(a)}}},regen:function(e){if(1==e)repod.psdle.determineGames();else{var t="",a=0;repod.psdle.exportList.delimited.destroy(),$.each(repod.psdle.gamelist_cur,function(e,o){o.plus&&a++,t+=repod.psdle.table_utils.gen.row(o)}),t+=repod.psdle.table_utils.gen.totals(),$(".search.stats.all.current").text(repod.psdle.gamelist_cur.length),$(".search.stats.all.total").text(repod.psdle.gamelist.length),$(".search.stats.plus.total").text(a),$("datalist#searchAutocomplete").empty(),$.each(repod.psdle.autocomplete_cache,function(e,t){$("<option />",{value:t}).appendTo("datalist#searchAutocomplete")}),$(".psdle_table tbody").html(t),this.icons.select()}},plus_switch:function(){this.regen(!0)},margin:function(){$(".psdle_table").animate({"margin-top":$(".search.main.container").outerHeight()-$("#sub_container").css("padding-top").replace("px","")+"px"}),this.icons.smartScroll()},icons:{select:function(e){var t=this;$(document).off("scroll").on("scroll",function(){t.smartScroll()}),this.smartScroll()},toSize:function(e,t){return t=t||repod.psdle.config.iconSize||42,e+(/\&w=\d+&h=\d+$/.test(e)?"":"&w="+t+"&h="+t)},validate:function(e){e=Number(e);var t=repod.psdle.gamelist[e];if(t.safe_icon)this.setIcon(e);else{repod.psdle.config.iconSize;var a=t.icons.shift();this.toSize(a);if(void 0==a)return t.safe_icon=!0,t.icon=t.api_icon,this.setIcon(e),0;$.extend(repod.psdle.gamelist[e],{safe_icon:!0,icon:a}),this.setIcon(e)}},setIcon:function(e){$("#psdle_index_"+e+" .psdle_game_icon").attr("src",this.toSize(repod.psdle.gamelist[e].icon))},smartScroll:function(){var e=this,t=window.scrollY,a=t+window.innerHeight,o=[];$("[id^=psdle_index_]").filter(function(e,t){return e%10==0}).each(function(e,n){var i=$(n).offset().top;if(i>a)return!1;i>=t&&o.push(n)});var n=Math.max(0,$(o[0]).index()-10),i=$(o.pop()).index()+10;$("[id^=psdle_index_]").slice(n,i).each(function(t){1!==$(this).data("icon")&&($(this).data("icon",1),e.validate($(this).attr("id").split("_").pop()))})}}},determineGames:function(){this.exportList.delimited.destroy(),this.gamelist_cur=[],this.autocomplete_cache=[];var e=this,t=this.safeSystemCheck(),a=$("#psdle_search_text")?$("#psdle_search_text").val():this.config.last_search,o=[],n={};$.each($("[id^=filter_]"),function(){var e=$(this).attr("id").split("_").splice(1).join("_");n[e]=$(this).hasClass("toggled_off")}),$("#psdle_search_text").removeClass("negate_regex"),$.each(this.gamelist,function(i,r){var s=e.safeGuessSystem(r.platform),l=!0,d="";switch($("#psdle_search_select").val()){default:case"name":d=r.name;break;case"id":d=r.id;break;case"pid":d=r.productID;break;case"date":d=r.date;break;case"publisher":d=r.publisher;break;case"desc":r.description?d=r.description:l=!1;break;case"genre":r.genre?d=r.genre.join(","):l=!1;break;case"base":r.baseGame?d=r.baseGame:l=!1}if($.inArray(s,t)>-1){if(e.config.deep_search&&n[r.category]&&(l=!1),1==l&&""!==a){var p=a.match(/^\/(.+?)\/([imgdp]+)?$/i);(l=!!(p&&p[2]&&p[2].toLowerCase().indexOf("d")>=0))&&($("#psdle_search_text").addClass("negate_regex"),p[2]=p[2].replace("d","")),p?RegExp(p[1]?p[1]:a,p[2]?p[2]:"").test(d)&&(l=!l):d&&d.toLowerCase().indexOf(a.toLowerCase())>=0&&(l=!l)}1==l&&($(".search.input.plus").prop("checked")?l=1==r.plus:$(".search.input.plus").prop("indeterminate")||$(".search.input.plus").prop("checked")||(l=!(1==r.plus))),1==l&&(e.gamelist_cur.push(r),-1==$.inArray(d,o)&&(o.push(d),e.autocomplete_cache.push(d)))}}),e.config.last_search=a,this.sortGamelist("noreverse")},sortGamelist:function(e){var t=!0;switch("noreverse"==e?(t=!1,e=this.config.lastsort?this.config.lastsort:"sort_date"):e=e?$(e).attr("id"):this.config.lastsort?this.config.lastsort:"sort_date",e){default:case"sort_date":this.gamelist_cur.sort(function(e,t){return e.date>t.date?-1:e.date<t.date?1:0});break;case"sort_name":this.gamelist_cur.sort(function(e,t){return e.name.toLocaleLowerCase()>t.name.toLocaleLowerCase()?1:e.name.toLocaleLowerCase()<t.name.toLocaleLowerCase()?-1:0});break;case"sort_size":this.gamelist_cur.sort(function(e,t){return e.size>t.size?1:e.size<t.size?-1:0})}1==t?e==this.config.lastsort?(this.config.lastsort_r||this.gamelist_cur.reverse(),this.config.lastsort_r=!this.config.lastsort_r):this.config.lastsort_r=!1:this.config.lastsort_r&&this.gamelist_cur.reverse(),$("#psdle_sort_display").remove(),$("#"+e).append("<span id='psdle_sort_display' class='psdle_sort_"+(this.config.lastsort_r?"asc":"desc")+"' />"),this.config.lastsort=e,this.table.regen()},safeSystemCheck:function(){var e=[];return $("span[id^=system_]:not('.toggled_off')").each(function(){e.push($(this).text())}),e},safeGuessSystem:function(e){var t="object"==typeof e?e.join(" "):e;return"PS3 PSP PS Vita"==(t=t.replace(/[^\w\d ]/g,""))||"PS3 PSP"==t||"PS Vita PSP"==t||t.indexOf("PSP")>-1?t="PSP":"PS3 PS Vita"==t||t.indexOf("PS Vita")>-1?t="PS Vita":"PS3"==t||t.indexOf("PS3")>-1?t="PS3":"PS VR"==t||t.indexOf("PS VR")>-1?t="PS VR":"PS4"==t||t.indexOf("PS4")>-1?t="PS4":"PS5"==t||t.indexOf("PS5")>-1?t="PS5":("PS_PLUS_REQUIRED"==t||t.indexOf("PS_PLUS_REQUIRED")>-1)&&(t="PS_PLUS_REQUIRED"),t},injectCSS:function(){$("head").append('<style type="text/css">div.amopromo{margin-bottom:1em}div.amopromo a,div.amopromo a:hover{text-decoration:unset;color:unset}div.amopromo .psdle_btn{margin:unset}div.amopromo .psdle_btn:hover{margin:unset}div.amopromo>div{font-size:small}.valkyrie #export_table input,.valkyrie #export_table select,.valkyrie #lang_select{height:unset;padding:unset;margin:unset;width:unset;display:unset}.psdle_logo{display:inline-block;width:84px;height:31px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAfCAYAAAEO89r4AAABaUlEQVRoge2XS27CQAyGPSVSUVErdqzpMqveiRvALnu67Gl6D+gFuAKIPgQrs0o1TJSJJ7aJBvnbRXE8f357XoCIGyTiEBFf33+BwgMpyg/eVRNSsENEpAQWMa27agL1e7JWcmCSVSG+tF6jp1D4o/qkqN8un+Bl7JpJUxP5vH38XT2T655CtEf6olKoaFLq3ElK2heRlgq//U/KKVj4rcrvs+Y+h7Z1ow2Vv9eg6A5p53MxhnI2an0vWSmW0HI2EhUTI5vSN4T2Xem0ycZRh4h7AJgOLaQLlf1ega2br3/IQlMW6TA2dYEPc2XToyZUGtbOdMs1lyX0lqeubEpvQqVp9GhsghxPOpvY8yPA1yo+MRtCh7iWfJ/j49rOpEE2QnM55h1U7/Wcox0nb+y9lqY6dzYtmgtmqDBmqDBmqDCDGcq5Ew5xCqViHSqMGSqMGSqMGSpMp6H3unloYR0qjBkqjBkqjBkqzAUtBKxj5lT3GAAAAABJRU5ErkJggg==)}.startup{z-index:10000;position:fixed;bottom:10px;left:10px;cursor:pointer;box-shadow:0 0 10px #fff}#muh_games_container{display:none;position:absolute;top:0;right:0;left:0;color:#000;z-index:10000;text-align:center}#sub_container{background-color:#fff}#startup_progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:400px;height:16px;border:1px solid #999;overflow:hidden;border-radius:10px;margin:10px;color:#2185f4!important}#startup_progress::-moz-progress-bar{background-color:#2185f4!important}#startup_progress::-webkit-progress-value{background-color:#2185f4!important}.psdle_btn{background-color:#2185f4}.psdle_btn{cursor:pointer;border-radius:13px;color:#fff;padding:1px 15px;display:inline-block;margin:5px auto}.psdle.tagline{font-size:small}.psdle.tagline>a,.psdle.tagline>span{line-height:0;cursor:pointer;color:#7f6d75!important}.psdle.tagline>a:hover,.psdle.tagline>span:hover{color:inherit!important;text-decoration:underline}.search.options.syntax{display:block;text-align:center;width:500px;margin:auto;margin-bottom:1em;border:none;border-bottom:1px solid #000}.search.options.filter.container{display:inline-block;background-color:#2185f4;color:#fff;margin:0 .3em;cursor:default}.search.options.filter.container .value{display:inline-block;padding:0 .2em;text-align:center}.search.options.filter.container.system .value{background-color:red}.search.options.filter.container.category .value{background-color:green}.search.options.filter.close{display:inline-block;color:#fff;padding:0 .3em;cursor:pointer}.search.options.filter.close:hover{background-color:rgba(255,51,0,.8)}.search.options.container{margin-bottom:20px}.search.main.container{position:fixed;left:0;top:0;width:100%;padding:15px 0;background-color:rgba(255,255,255,.8);z-index:10000}.search.input.plus{cursor:pointer!important}.search.export{display:inline;width:95%;max-width:600px}.psdle_table,table{text-align:left;border-collapse:initial}th[id^=sort]{cursor:pointer}th[id^=sort]:hover{background-color:#62a5f0}th{padding:5px!important;background-color:#2185f4;color:#fff;border:none;transition:background-color .3s}tr:hover{background-color:rgba(33,133,244,.7)!important}.valkyrie td{padding:0;border:none}td a.psdle_game_link{display:block;width:100%;height:100%;color:#000;padding:8px!important}.psdle_game_icon.is_plus{background-color:#ffd10d}tr[id^=psdle_index_].is_plus td:last-child{border-right:#ffd10d 3px solid}tr:nth-child(2n){background-color:#eee}td{text-align:center}td:nth-child(2),th:nth-child(2){text-align:left!important}#psdle_search_select,#psdle_search_text{font-size:large;padding:5px 10px;border:1px solid #f0f0f0;display:inline-block;width:auto}#psdle_search_select{background-color:#f0f0f0;text-align:center}#psdle_search_text{font-size:large;max-width:480px;width:100%}.negate_regex{background-color:#ff8080!important;color:#fff}.psdle_fancy_bar>span,.psdle_fancy_but,span#export_view,span[id^=dl_],span[id^=filter_],span[id^=system_]{font-weight:700;font-size:.9em;color:#fff;background-color:#2185f4;display:inline-block;margin-right:2px;margin-bottom:5px;padding:1px 10px;cursor:pointer}.psdle_fancy_but{border-radius:12px}#muh_games_container:not(.rtl) .psdle_fancy_bar>span:first-of-type{border-top-left-radius:12px;border-bottom-left-radius:12px}#muh_games_container:not(.rtl) .psdle_fancy_bar>span:last-of-type{border-top-right-radius:12px;border-bottom-right-radius:12px}.toggled_off{background-color:rgba(33,133,244,.4)!important}#muh_games_container:not(.rtl) #psdle_search_select{border-radius:90px 0 0 90px}#psdle_search_text{border-radius:0 90px 90px 0}.psdle_game_icon{max-width:100%;vertical-align:middle;padding:3px;width:42px;height:42px}.psdle_sort_asc,.psdle_sort_desc{float:right;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent}.psdle_sort_asc{border-bottom:5px solid #fff}.psdle_sort_desc{border-top:5px solid #fff}#dlQARating,#dlQAStat{color:#fff;background-color:rgba(33,133,244,.8);font-size:small}#dlQueueAsk{width:400px;height:400px}#dlQAN{background-color:rgba(33,133,244,.8);padding:7px 15px;color:#fff;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#dlQASys{position:absolute;bottom:0;padding:7px 0;color:#fff;display:table;width:100%;table-layout:fixed}#dlQASys>div{display:table-cell}#dlQASys>div>div{cursor:pointer;background-color:rgba(33,133,244,.8);border-radius:10px;padding:2px;margin:0 10px;box-shadow:0 0 30px #000;transition:background-color .5s,box-shadow .5s}#dlQASys>div>div:hover{background-color:rgba(33,133,244,1);box-shadow:0 0 30px rgba(33,133,244,1)}#dlQAStat{border-bottom-left-radius:20px;padding:0 10px 0 15px;float:right}#dlQARating{border-bottom-right-radius:20px;padding:0 15px 0 10px;float:left}.success{background-color:#237423!important}.failure{background-color:#a43636!important}#dlQueueExt{overflow:hidden;position:absolute;left:10px;right:10px;bottom:40px;font-size:.8em;background-color:rgba(33,133,244,.8);padding:10px;border-radius:9px;top:66px;text-align:left}.cover,.cover>div>div{background-size:cover}.cover{z-index:10000;position:fixed;top:0;left:0;width:100%;height:100%;display:table;background-color:rgba(0,0,0,.25);background-position:center}.cover>div{display:table-cell;vertical-align:middle;height:inherit;text-align:center}.cover>div>div{box-shadow:0 0 30px #000;display:inline-block;background-color:#fff;border-radius:20px;overflow:hidden;position:relative}#export_select{padding:10px;background-color:#fff;color:#000}#export_select>div{border-top-left-radius:10px;border-top-right-radius:10px;overflow-y:auto;overflow-x:hidden;max-height:490px}#export_table{width:100%}#export_table th{text-align:center}#export_table .orderUp{cursor:pointer;height:1em;border-left:.4em solid transparent;border-right:.4em solid transparent;border-bottom:.9em solid rgba(0,0,0,.2);display:inline-block;padding:1px;margin:0 3px}#export_table .orderUp:hover{border-bottom-color:#000}#slider,.handle{display:inline-block}#slider{vertical-align:bottom;cursor:pointer;width:30px;height:12px;border-radius:10px;border:2px solid #f0f0f0}.handle_container{text-align:center;width:100%;height:100%}.handle{width:10px;height:10px;border-radius:100%;margin:0 2px 6px;border:1px solid #fff;background-color:#85c107}[data-tooltip]{position:relative;z-index:2;cursor:pointer}[data-tooltip]:after,[data-tooltip]:before{visibility:hidden;opacity:0;pointer-events:none}[data-tooltip]:before{--width:300px;position:absolute;top:150%;left:50%;margin-left:calc(var(--width)/2*-1);padding:7px;width:var(--width);border-radius:3px;background-color:rgba(33,133,244,.9);color:#fff;content:attr(data-tooltip);text-align:center;font-size:.9em;line-height:1.2;box-shadow:0 0 10px #fff}[data-tooltip]:after{position:absolute;top:calc(150% - 5px);left:50%;margin-left:-5px;width:0;border-bottom:5px solid rgba(33,133,244,.9);border-right:5px solid transparent;border-left:5px solid transparent;content:" ";font-size:0;line-height:0}[data-tooltip]:hover:after,[data-tooltip]:hover:before{visibility:visible;opacity:1}.ui-autocomplete{z-index:9002;max-width:590px;max-height:200px;overflow-y:auto;overflow-x:hidden}.ui-menu{position:fixed;border:2px solid #f0f0f0;border-top:none;background-color:#fff}.ui-menu>.ui-menu-item *{color:#000;text-decoration:none;white-space:nowrap;text-overflow:ellipsis;cursor:pointer}.ui-menu>.ui-menu-item:nth-child(even){background-color:#e6e6e6}.ui-menu-item .ui-state-focus{display:inline-block;width:100%;color:#000;background-color:rgba(33,133,244,.7)}.psdletv{font-style:italic;font-weight:700;font-size:.6em;vertical-align:text-top;position:absolute;top:4px}.psp3{border-left:2px solid #2185f4;border-right:2px solid #2185f4}.psp2{background-color:rgba(33,133,244,.15)!important}#muh_games_container.rtl{direction:rtl}.rtl #psdle_search_select{border-radius:0 90px 90px 0}.rtl #psdle_search_text{border-radius:90px 0 0 90px}.rtl .psdle_fancy_bar span:last-of-type{border-top-left-radius:12px;border-bottom-left-radius:12px}.rtl .psdle_fancy_bar span:first-of-type{border-top-right-radius:12px;border-bottom-right-radius:12px}.rtl .psdle_table *{text-align:right}.rtl tr.is_plus[id^=psdle_index_] td:last-child{border-right:none;border-left:#ffd10d 3px solid}.psdledark #sub_container{background-color:#222;color:#e7e7e7}.psdledark a.psdle_game_link{color:#e7e7e7}.psdledark .search.main.container{background-color:rgba(34,34,34,.7)}.psdledark tr{background-color:#222}.psdledark tr:nth-child(2n){background-color:#393939}button.psdleClose{cursor:pointer;position:absolute;top:0;right:0;z-index:10001}</style>')},exportList:{config:[],configure:function(){$("#export_configure").remove(),0==this.config.length&&(this.config=[{property:"name",title:repod.psdle.lang.columns.name},{property:"platform",title:repod.psdle.lang.columns.platform},{property:"prettySize",title:repod.psdle.lang.columns.size},{property:"prettyDate",title:repod.psdle.lang.columns.date}]);var e=this,t=$("<div>",{id:"export_select"}).append($("<div>").append(this.genTable()));t.append($("<span class='psdle_fancy_bar'><span id='export_row_del'>-</span><span id='export_row_add'>+</span></span><span id='export_import' class='psdle_fancy_but'>"+repod.psdle.lang.strings.exportImport+"</span><br><span class='psdle_fancy_bar'><span id='sel_export_view'>"+repod.psdle.lang.labels.exportView+"</span><span id='sel_export_json'>JSON</span><span id='sel_export_csv'>CSV</span>")),$("<div />",{id:"export_configure",class:"cover"}).append($("<div />").append(t)).appendTo("#muh_games_container"),$("#export_import").on("click",function(){e.saveConfig();var t=prompt("",JSON.stringify(e.config));if(null!==t)try{e.config=JSON.parse(t).filter(function(e){var t=repod.psdle.prop_cache.indexOf(e.property)>-1;return!t&&console.warn(e),t})}catch(e){}e.configure()}),$("#export_row_add").off("click").on("click",function(t){$("#export_table tbody").append(e.genRow())}),$("#export_row_del").off("click").on("click",function(e){$("#export_table tr:gt(1)").last().remove()}),$("#sel_export_view").off("click").on("click",function(){e.saveConfig(),e.delimited.handle(),$("#export_configure").remove()}),$("#sel_export_csv").off("click").on("click",function(){e.saveConfig(),e.csv.handle(),$("#export_configure").remove()}),$("#sel_export_json").off("click").on("click",function(){e.saveConfig(),e.json.handle(),$("#export_configure").remove()}),$("#export_configure").off("click").one("click",function(){$(this).remove(),repod.psdle.newbox.bind("off")}),$("#export_select").off("click").on("click",function(e){e.stopPropagation()})},genTable:function(){var e=this.genSelect(),t=this.config.length||5,a=$("<table id='export_table'><tr><th>"+repod.psdle.lang.strings.exportColumnName+"</th><th>"+repod.psdle.lang.strings.exportProperty+"</th></tr>");for(i=0;i<t;i++){var o=this.config[i].property,n=this.config[i].title||"",r=e.clone();this.config[i]&&r.find("[value="+o+"]").attr("selected","selected"),r=r[0].outerHTML,a.append(this.genRow(n,r))}return a},genRow:function(e,t){e=e||"",t=t||this.genSelect()[0].outerHTML;var a=$("<tr><td><div class='orderUp'></div><input placeholder='...?' value='"+e+"'></td><td>"+t+"</td></tr>");return $(a).find(".orderUp").click(function(){var e=$(this).parent().parent().prev(":not(:first-child)");e.length>0&&(e.before($(this).parent().parent().clone(!0)),$(this).parent().parent().remove())}),a},genSelect:function(){var e=$("<select />");return $.each(repod.psdle.prop_cache,function(t,a){e.append($("<option />",{text:a,value:a}))}),e},saveConfig:function(){var e=[];$("#export_select").find("table tr:gt(0)").each(function(){e.push({property:$(this).find("select option:selected").val(),title:$(this).find("input").val()})}),this.config=e},delimited:{gen:function(e){e=e||"\t";var t=repod.psdle.exportList.formatRow(e);return $(repod.psdle.gamelist_cur).each(function(a){t+=repod.psdle.exportList.formatRow(e,a)}),t+=repod.psdle.exportList.formatRow(e,-1)},handle:function(){this.destroy(),$("<textarea />",{class:"search export",text:this.gen(prompt(repod.psdle.lang.strings.delimiter,"\t"))}).insertAfter(".psdleSearchStats"),repod.psdle.table.margin()},destroy:function(){$(".search.export").remove(),repod.psdle.table.margin()}},json:{gen:function(){var e=repod.psdle.exportList.config,t={version:repod.psdle.version,columns:e,items:[]};return $.each(repod.psdle.gamelist_cur,function(a){var o={};$.each(e,function(e,t){o[t.property]=repod.psdle.exportList.format(a,t.property,"JSONExp")}),t.items.push(o)}),t},handle:function(){repod.psdle.exportList.download(".json",JSON.stringify(this.gen()))}},csv:{gen:function(e){e=e||",";var t=repod.psdle.exportList.formatRow(e);return $.each(repod.psdle.gamelist_cur,function(a){t+=repod.psdle.exportList.formatRow(e,a)}),t+=repod.psdle.exportList.formatRow(e,-1)},handle:function(){repod.psdle.exportList.download(".csv",this.gen())}},download:function(e,t){var a=new Blob([t],{type:"octet/stream"});$("<a>",{download:"psdle_"+(new Date).toISOString()+(e||"_generic.txt"),href:window.URL.createObjectURL(a)})[0].dispatchEvent(new MouseEvent("click")),window.URL.revokeObjectURL(a)},format:function(e,t,a){var o=repod.psdle.gamelist_cur[e],n="JSONExp"==a,i=!!n||repod.psdle.lang.strings.yes,r=!n&&repod.psdle.lang.strings.no;switch(t){case"empty":return"";case"category":return repod.psdle.lang.categories[o.category]||o.category;case"platform":return repod.psdle.safeGuessSystem(o.platform);case"vitaCompat":return $.inArray("PS Vita",o.platformUsable)>-1?i:r;case"vitatvCompat":return repod.psdle.config.check_tv&&repod.psdle.id_cache[o.productID].tvcompat&&"PS Vita"==repod.psdle.safeGuessSystem(o.platform)?i:r;default:var s=o[t];if(!s)break;return"boolean"==typeof s&&(s=s?i:r),"object"==typeof s&&(s=n?s:JSON.stringify(s).replace(/"/g,"'")),"string"==typeof s&&((s=(s=s.replace(/([\r\n]+?)/gm," ")).replace(/"/g,'""')).indexOf(a)>-1||s.indexOf('"')>-1)&&(s='"'+s+'"'),s}return n?void 0:""},formatRow:function(e,t){var a=this,o="";e=e||",";if(t>=0){repod.psdle.gamelist_cur[t],repod.psdle.lang.strings.yes,repod.psdle.lang.strings.no;$.each(this.config,function(n,i){var r=i.property;i&&(o+=a.format(t,r,e)+e)}),o+="\n"}else-1==t?($.each(this.config,function(t,a){var n=a.property;o+=n+e}),o+='"'+JSON.stringify(this.config).replace(/"/g,"'")+'"'+e,o+=repod.psdle.version+e):($.each(this.config,function(t,a){o+=a.title+e}),o+="\n");return o}},game_api:{batch:[],called:0,backport:function(){repod.psdle.backportConfig={root:repod.psdle,catalogDatabase:repod.psdle.database,catalogCache:repod.psdle.databaseCache};var e=repod.psdle.backportConfig;repod.psdle.database.init(e,()=>e.catalogDatabase.transact.getNewIDs(e,e=>this.queue(e)))},queue:function(e){this.batch=e.map(function(e){return{index:0,pid:e}}),this.called=repod.psdle.gamelist.length-this.batch.length,this.run()},run:function(e){var t=this,a=repod.psdle.config.valkyrieInstance.lookup("service:susuwatari");0!=this.batch.length?this.batch.splice(0,e||3).forEach(function(e,o){a.resolve(e.pid).then(function(e){var a=t.parse(e);repod.psdle.pid_cache.hasOwnProperty(e.id)&&(repod.psdle.pid_cache[e.id]=a),repod.psdle.gamelist.find(function(t){return t.id==e.id}).hasOwnProperty("index")&&(repod.psdle.backportConfig.catalogCache[e.id]=a),t.called++}).catch(function(e){if(e.response){var a=e.response;404==a.status&&(repod.psdle.backportConfig.catalogCache[a.url.split("/").pop()]={}),a.status}t.called++,repod.psdle.type_cache.unknown=!0}).then(function(){t.run(1),t.updateBar()})}):this.finish()},updateBar:function(){var e=this.called,t=repod.psdle.gamelist.length;if(e%100==0){var a=repod.psdle.backportConfig;a.catalogDatabase.transact.dumpCacheToDB(a,()=>console.log("Catalog saved..."))}$("#startup_progress").attr({value:e,max:t}),$("#psdle_status").text(repod.psdle.lang.startup.wait).append($("<br />")).append(e+" / "+t),e>=t&&($("#psdle_status").text(repod.psdle.lang.startup.wait),$("#startup_progress").attr("value",null),this.finish())},finish:function(e){if(!(!0!==e&&this.called>0&&this.called<repod.psdle.gamelist.length)){var t=repod.psdle.backportConfig;t.catalogDatabase.transact.dumpCacheToDB(t,function(){t.root.game_api.finishCB(t)},!0)}},finishCB:function(e){repod.psdle.gamelist.forEach(function(t,a){var o=t.id;if(e.catalogCache.hasOwnProperty(o)){var n=e.catalogCache[o];$.extend(repod.psdle.gamelist[a],n),repod.psdle.type_cache[n.category||"unknown"]=!0}}),setTimeout(function(){repod.psdle.container.postList("catalog")},100)},parse:function(e){var t={},a=/^(PS\d+)_\w+\+?$/i;if($.each([e.secondaryClassification,e.primaryClassification],function(e,o){if(a.test(o))return t.platform=repod.psdle.safeGuessSystem(o.match(a).pop()),!1}),("required"==e.psVrCompatibility||e.metadata&&e.metadata.cn_vrRequired&&1==e.metadata.cn_vrRequired.values[0])&&(t.platform=["PS VR"]),e.mediaList&&(t.images=e.mediaList.screenshots.map(function(e){return e.url}).filter(function(e){return/\.(png|jpg)$/i.test(e)})),""!==e.fileSize.unit){var o=repod.psdle.config.valkyrieInstance.lookup("service:intl");t.prettySize=o.t("c.page.details.drmDetails."+e.fileSize.unit.toLowerCase(),{val:e.fileSize.value}).string}return t.baseGame=e.name||void 0,t.category=e.topCategory||"unknown",t.description=e.longDescription||void 0,t.displayPrice=e.mbSkus&&e.mbSkus[0]&&e.mbSkus[0].display_price||void 0,t.publisher=e.providerName||void 0,t.rating=e.starRating?[e.starRating.score,e.starRating.total]:void 0,t.releaseDate=e.releaseDate||void 0,t.genre=e.genres.length>0&&e.genres.sort()||void 0,t}},backportConfig:{},databaseCache:{},database:{version:2,name:"PSDLEValkyrieCatalogCache",db:{},init:async function(e,t){await this.persist()&&this.create.db(e,t)},persist:function(){return!(!navigator.storage||!navigator.storage.persist)&&navigator.storage.persist().then(function(e){return e})},drop:function(){this.db.hasOwnProperty("close")&&this.db.close();var e=window.indexedDB.deleteDatabase(this.name);e.onsuccess=(e=>console.log(e)),e.onerror=(e=>console.error(e)),location.reload()},create:{db:function(e,t){var a=window.indexedDB.open(e.catalogDatabase.name,e.catalogDatabase.version);a.onerror=(e=>console.error(e)),a.onupgradeneeded=function(t){e.catalogDatabase.db=a.result,e.catalogDatabase.create.upgrade(e,t,a.result)},a.onsuccess=function(o){e.catalogDatabase.db=a.result,t()}},upgrade:function(e,t,a){t.oldVersion>0&&t.oldVersion<e.catalogDatabase.version&&a.deleteObjectStore("cache"),this.objectStore(e,a)},objectStore:function(e,t){(t=t.createObjectStore("cache",{keyPath:"id"})).createIndex("ID","id",{unique:!0}),t.transaction.oncomplete=(e=>console.log(e)),t.transaction.onerror=(e=>console.log(e))}},transact:{get:function(e,t){return e.catalogDatabase.db.transaction("cache",t)},dumpCacheToDB:function(e,t,a){var o=this.get(e,"readwrite"),n=o.objectStore("cache");for(var[i,r]of(o.oncomplete=function(o){a?e.catalogDatabase.transact.dumpDBToCache(e,t):t(o)},o.onerror=(e=>console.log(e)),Object.entries(e.catalogCache)))n.put({id:i,json:r})},dumpDBToCache:function(e,t){var a=this.get(e),o=a.objectStore("cache"),n={};a.oncomplete=(e=>t(e)),a.onerror=(e=>console.log(e)),o.openCursor().onsuccess=function(t){var a=t.target.result;a?(n[a.key]=a.value.json,a.continue()):e.catalogCache=Object.assign({},n)}},getNewIDs:function(e,t){var a=repod.psdle.gamelist.map(e=>e.id),o=this.get(e,"readonly"),n=o.objectStore("cache"),i=[];o.onerror=(e=>console.log(e)),n.openCursor().onsuccess=function(e){var o=e.target.result;if(o)i.push(o.key),o.continue();else{var n=a.filter(e=>i.indexOf(e)<0);console.debug("Catalog new IDs:",n),t(n)}}}}},dlQueue:{batch:{init:function(){var e=this;this.Kamaji=repod.psdle.config.valkyrieInstance.lookup("service:kamaji/downloads"),this.Kamaji.fetchDeviceCount().then(function(t){repod.psdle.config.active_consoles={vita:t.numPSVITA>0,ps3:t.numPS3>0,ps4:t.numPS4>0},e.Kamaji.enableDownloadStatusPolling()})},send:function(e,t,a){var o=this,n=this.Kamaji,i=require("valkyrie-storefront/utils/const").default.KamajiPlatforms,r=repod.psdle.gamelist[e].id;switch(this.recordQueue.push({sys:t,id:r}),t){case"ps4":n.startPS4Download(r),a&&$(a).css({"background-color":"green"});break;case"ps3":case"vita":case"psvita":t=("vita"==t?"psvita":t).toUpperCase(),n.startDRMDownload(i[t],r).then(function(e){o.recordProcess()}),a&&$(a).css({"background-color":"green"})}},recordQueue:[],recordProcess:function(){var e=this.Kamaji,t=this.recordQueue.splice(0,1)[0];void 0!==e.waitingDownloads[t.sys+"Downloads"].find(function(e){return e==t.id})?this.good($("[id^=dla_"+t.sys+"]")):this.bad($("[id^=dla_"+t.sys+"]"))},good:function(e){$(e).addClass("success")},bad:function(e){$(e).addClass("failure")},add:{ask:function(e){repod.psdle.newbox.open($(e).attr("id").split("_").pop())},go:function(e){repod.psdle.dlQueue.batch.send($(e).attr("id").split("_")[2],$(e).attr("id").split("_")[1])}},auto:function(e){var t=isNaN(e)?Number($(e).attr("id").split("_").pop()):Number(e),a=repod.psdle.config.active_consoles,o=repod.psdle.gamelist[t],n=o.platformUsable;$.inArray("PS Vita",n)>=0?n=a.vita?"vita":!!a.ps3&&"ps3":$.inArray("PS3",n)>=0||$.inArray("PSP",n)>=0?n=!!a.ps3&&"ps3":$.inArray("PS4",n)>=0&&(n=!!a.ps4&&"ps4"),0==n?alert(repod.psdle.lang.strings.noTarget):$(e).data("queued")?($(e).removeData("queued").animate({"background-color":""}),this.remove.go(n,o.id,!0)):($(e).data("queued",!0),this.send(t,n,e))},remove:{parse:function(e){this.go($(e).children("td:eq(3)").text(),repod.psdle.gamelist[Number($(e).attr("id").split("_").pop())].id)},go:function(e,t,a){var o=function(){repod.psdle.container.go("dlQueue")};"ps4"==e?repod.psdle.dlQueue.batch.Kamaji.cancelPS4Download(t).then(o):repod.psdle.dlQueue.batch.Kamaji.cancelDRMDownload(e,t).then(o)}}},generate:{bindings:function(){repod.psdle.newbox.bind("off"),$(document).one("click","#dl_list",function(){repod.psdle.table.gen()}),$(document).off("click","[id^=psdle_index_]").on("click","[id^=psdle_index_]",function(e){e.preventDefault(),repod.psdle.dlQueue.batch.remove.parse(this)})},table:function(){var e="";$(".psdle_table").remove(),$("#sub_container").append("<div class='psdle_table'><table style='display:inline-block;text-align:left'><thead><tr><th>"+repod.psdle.lang.columns.icon+"</th><th id='sort_name'>"+repod.psdle.lang.columns.name+"</th><th>"+repod.psdle.lang.columns.platform+"</th><th> > </th><th id='sort_size'>"+repod.psdle.lang.columns.size+"</th><th id='sort_date'>"+repod.psdle.lang.columns.date+"</th></tr></thead><tbody></tbody></table></div>"),$.each(repod.psdle.dlQueue.batch.Kamaji.waitingDownloads,function(t,a){/Downloads$/.test(t)&&a.length>0&&$.each(repod.psdle.gamelist,function(o,n){if(a.indexOf(n.id)>=0){var i={createdTime:"?",to_sys:t.match(/(.*?)Downloads/).pop()};e+=repod.psdle.table_utils.gen.row(n,i)}})}),$(".psdle_table tbody").html(e),repod.psdle.table.margin()},display:function(){this.bindings(),$("#sub_container").empty().append(repod.psdle.table.header.gen(!0)),this.table()},destroy:function(){$("#sub_container").html("")}}},table_utils:{random:function(){var e=repod.psdle.gamelist_cur[Math.floor(Math.random()*repod.psdle.gamelist_cur.length)].index-1;return repod.psdle.newbox.open(e),e},gen:{row:function(e,t){var a=repod.psdle.config.game_page+e.id,o=(e.safe_icon&&e.icon,e.plus?"is_plus":""),n=repod.psdle.safeGuessSystem(e.platform),i=repod.psdle.config.iconSize+"px",r="<tr id='psdle_index_"+(e.index-1)+"' class='"+o+"'><td style='max-width:"+i+";max-height:"+i+";'><a target='_blank' href='"+e.url+"'><img title='"+repod.psdle.lang.labels.page+" "+e.dlListPage+"' class='psdle_game_icon "+o+"' /></a></td><td><a class='psdle_game_link' target='_blank' href='"+a+"'>"+e.name+"</a></td>",s="PS Vita"!=n&&$.inArray("PS Vita",e.platformUsable)>-1;return s=s?"class='psp2'":"",r+=t?"<td>"+n+"</td><td>"+t.to_sys.toUpperCase().replace("VITA","PS Vita")+"</td><td>"+e.prettySize+"</td><td>"+t.createdTime+"</td>":"<td "+s+">"+n+(repod.psdle.config.check_tv&&repod.psdle.id_cache[e.productID].tvcompat&&"PS Vita"==n?"<span class='psdletv'>TV</span>":"")+"</td><td>"+e.prettySize+"</td><td>"+e.prettyDate+"</td>",r+="</tr>"},totals:function(){var e=0,t=repod.psdle.config.valkyrieInstance.lookup("service:intl");$.each(repod.psdle.gamelist_cur,function(t,a){e+=a.size});return"<tr id='psdle_totals'><td /><td /><td /><td>"+(e>0?t.t("c.page.details.drmDetails."+(0).unit,{val:(0).value}):"")+"</td><td /></tr>"}}},newbox:{generate:function(e){var t="",a=repod.psdle.gamelist[e],o=a.index-1,n=a.icon;dialog=$("<div>",{id:"dlQueueAsk",style:'background-image:url("'+repod.psdle.table.icons.toSize(n,400)+'");'});try{a.plus&&(t=$("#psdleplus").clone()[0].outerHTML+" ")}catch(e){}if(dialog.append($("<div>",{id:"dlQAN"}).append(t+a.name)),repod.psdle.config.dlQueue){var i=$.grep(a.platformUsable.slice(0),function(e){return"PSP"!==e}),r=$("<div>",{id:"dlQASys"});if(i.length>1)$.each(i,function(e,t){var a=t.replace(/ps /i,"").toLowerCase(),n=repod.psdle.config.active_consoles.hasOwnProperty(a)?"":"toggled_off";r.append($("<div>").append($("<div>",{id:"dla_"+a+"_"+o,class:n,text:t})))});else{var s=i[0].slice(0).replace(/ps /i,"").toLowerCase(),l=repod.psdle.config.active_consoles.hasOwnProperty(s)?"":"toggled_off";r.html($("<div>").append($("<div>",{id:"dla_"+s+"_"+o,class:l,text:repod.psdle.lang.strings.queueTo.replace("$SYS$",a.platformUsable[0].slice(0))})))}dialog.append(r)}if(a.rating){var d=$("<div>",{class:"fa fa-star"})[0].outerHTML;dialog.append($("<div>",{id:"dlQARating"}).append(d+" "+a.rating[0]+" / 5 ("+a.rating[1]+")"))}dialog.append($("<div>",{id:"dlQAStat",html:repod.psdle.safeGuessSystem(a.platform)+" | <div style='display:inline'>"+a.prettySize+"</div> | "+a.prettyDate})),dialog=$("<div>",{id:"dlQueue_newbox",class:"cover"}).append($("<div>").append(dialog[0].outerHTML));var p=[];(a.images&&$.each(a.images,function(e,t){p.push({type:"image",url:t})}),p.length>0)&&("video"==(p=p[Math.floor(Math.random()*p.length)]).type&&$(dialog).prepend('<div style="z-index:-1;position:absolute;top:0px;left:0px;right:0px;bottom:0px;background-color:#000"><video style="min-height:100%;" autoplay loop muted><source src="'+a.videos[0]+'" type="video/mp4"></video></div>'),"image"==p.type&&$(dialog).css("background-image","url('"+a.images[Math.floor(Math.random()*a.images.length)]+"')"));return dialog[0].outerHTML},bind:function(e){var t=this;switch(e){case"on":default:$("#dlQueue_newbox").one("click",function(){t.close()}),$("#dlQueueAsk").on("click",function(e){e.stopPropagation()}),$("div[id^=dla_]:not('.toggled_off')").on("click",function(){repod.psdle.dlQueue.batch.add.go(this)});break;case"off":$("div[id^=dla_]").off("click"),$("#dlQueueAsk").off("click")}},open:function(e){repod.psdle.table.icons.validate(e,-1),$("#dlQueue_newbox").length&&this.close(),$("#muh_games_container").append(this.generate(e)).promise().done(function(){repod.psdle.newbox.bind()})},close:function(){$("#dlQueue_newbox").remove(),this.bind("off")}},tv:{url_cache:[],container:"",init:function(){console.log("PSDLE | Starting PS TV checks."),$.each(repod.psdle.gamelist,function(e,t){repod.psdle.id_cache[t.productID]={tvcompat:!1}}),this.detect(function(e){void 0!==e?this.container=e:console.log("PSDLE | Couldn't find TV container.")})},detect:function(e){for(var t=repod.psdle.config.valkyrieInstance.lookup("service:storefront"),a=0;a<t.navigation.length;a++){var o=t.navigation[a];if("games"===o.routeName)for(a=0;a<o.submenu.length;a++){var n=o.submenu[a];if(n.targetContainerId.toLowerCase().indexOf("vita")>-1)for(a=0;a<n.items.length;a++){var i=n.items[a];if(i.targetContainerId.toLowerCase().indexOf("tv")>-1)return void e(i.targetContainerId)}}}e()},fetchList:function(){},run:function(){var e=this,t=this.url_cache.pop();t?$.getJSON(t).success(function(a){e.parse(t,a)}).fail(function(){e.run()}):repod.psdle.config.deep_search||repod.psdle.table.gen()},parse:function(e,t){var a=e.replace(/start=\d+/,"start="+(Number(e.match(/start=(\d+)/).pop())+Number(e.match(/size=(\d+)/).pop())));t.total_results&&t.start+t.size<t.total_results&&this.url_cache.push(a),$.each(t.links,function(e,t){repod.psdle.id_cache[t.id]&&(repod.psdle.id_cache[t.id].tvcompat=!0)}),this.run()}},debug:{injectEntitlement:function(e){return"object"==typeof(e=e||prompt("Enter valid Entitlement data:"))?$.each(e,function(e,t){repod.psdle.e_inject_cache.push(t)}):repod.psdle.e_inject_cache.push(JSON.parse(e)),repod.psdle.e_inject_cache.length},inject_lang:function(){var e=prompt("Insert JSON formatted language: (current below)",JSON.stringify(repod.psdle.lang));try{(e=JSON.parse(e)).hasOwnProperty("def")&&(e=e[e.def]),repod.psdle.lang={},repod.psdle.lang=repod.psdle.lang_cache.en.us,$.extend(!0,repod.psdle.lang,e),repod.psdle.container.go("startup")}catch(e){alert(e)}}}},repod.psdle.config.timerID=setInterval(function(e){"undefined"!=typeof Ember&&Ember.BOOTED&&Ember.Application.NAMESPACES_BY_ID.psst._booted&&(clearInterval(repod.psdle.config.timerID),repod.psdle.init())},500),console.log("%cPSDLE has started!","color:#2185f4;font-size:x-large;font-weight:bold;"),console.log("PSDLE | Ready.");