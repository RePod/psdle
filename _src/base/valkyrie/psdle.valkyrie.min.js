/*! psdle 4.0.4 (c) RePod, MIT https://github.com/RePod/psdle/blob/master/LICENSE - min - compiled 2021-04-24 */
var repod={};repod.psdle={version:"4.0.4",versiondate:"2021-04-24",autocomplete_cache:[],gamelist:[],gamelist_cur:[],e_inject_cache:[],id_cache:{},lang:{},pid_cache:{},sys_cache:{},type_cache:{},prop_cache:[],lang_cache:{ar:{def:"ae",ae:{author:"Oakkom",rtl:!0,local:"العربية",startup:{apis:"أختار الميزات التي تَود استخدامها حَرك المؤشر فوقها للمزيد من المعاومات<br>بعضُ الميزات لا يُمكن ابطالها",wait:"...جَار التَحْميل",start:"إبدأ"},columns:{icon:"الأيقونة",name:"الأسم",platform:"نَوعُ الجهاز",size:"الحَجم",date:"التاريخ"},labels:{exportView:"أحْفَظ الائحة",page:"الصفْحة"},categories:{downloadable_game:"الألعاب",demo:"الإصدارات التجريبية",add_on:"العَناصِر الأضافية",unlock:"Unlocks",unlock_key:"Unlock Keys",avatar:"صٌور رمزية",theme:"السِمات",other:"اخرى",other_game_related:"ألعاب مُتَعلِقة",game_content:"مُحتويات اللعبة",tumbler_index:"فَهرس تَمبلر (tumbler)",home:"المَنزل",ungrouped_game:"العاب غير مصنفة",promo_content:"مُحتَويات تَرويجْية",beta:"اصْدار تجريبي",application:"التَطبيقات",extras:"إضافات",unknown:"مَجهول"},strings:{delimiter:":أدخل الفَواصل",yes:"نَعم",no:"لا",search:"أبْحث",dlQueue:"لائِحة التَنزيل",dlList:"لائِحة الألعاب",plus:"ضبط ظاهرية العاب PlayStation Plus",queueAll:"الكُل",queueTo:"حَمل الى $SYS$",noTarget:"لا يوجد جِهاز للتَحميل اِليه",exportColumnName:"أِسم العَمود",exportProperty:"الخَصائص"},apis:[{internalID:"api_entitle",name:"تَاريخ الشِراء",desc:"لا يُمكن عَدم التَفعيل, أِن بَيانات شِرائك تُستَعمل لِيَتم تَشكيل الائِحة و تَحديد وَضع PlayStation Plus"},{internalID:"api_game",name:"الفَهرس",desc:".فَعِلْ لِلحُصول على مَعلومات إضافية عَن الألعاب, مِنها الأنواع. تَزيد الوَقت اللازم لِتحميلِ اللائحة"},{internalID:"api_queue",name:"لائحة التَنزيل",desc:".تَسمح بِزيادة أو حَذف العَناصر مِن لائحة التَنزيل, تُظهر مَعلومات لائحة التَنزيل و عَدد الأجْهِزة المُفعَلة عَلى الحِساب"},{internalID:"api_pstv",name:"PS TV",desc:"الكشف عَن الألعاب لِجهَاز PS TV مُتوافر فَقط لِمَتجر  en-us",disabled:!0}]}},de:{def:"de",de:{local:"Deutsch",startup:{apis:"Wähle aus welche PS Store Funktionen du benutzen möchtest, fahre mit der Maus über die jeweiligen Menü-Einträge für weiter Informationen.<br>Bestimmte Store Funktionen sind möglicherweise ausgeschaltet.",wait:"Seite wird geladen, bitte warten.",start:"Starten"},columns:{icon:"Symbol",name:"Name",platform:"Plattform",size:"Größe",date:"Datum"},labels:{exportView:"Ansicht exportieren",page:"Seite"},categories:{downloadable_game:"Spiele",demo:"Demos",add_on:"Erweiterungen",unlock:"Freischaltbares",unlock_key:"Freischaltbare Schlüssel",avatar:"Spielerbilder",theme:"Designs",other:"Andere",home:"Startseite",promo_content:"promo_inhalt",beta:"Betas",application:"Anwendungen",extras:"Extras",unknown:"Unbekannt"},strings:{delimiter:"Geben sie ein Trennzeichen ein:",yes:"Ja",no:"Nein",search:"Suche",dlQueue:"Warteschlange",dlList:"Download-Liste",plus:"PS+ Inhalte sichtbar/unsichtbar machen",queueAll:"Alle",queueTo:"Herunterladen zu $SYS$",noTarget:"Es ist keine Ziel Konsole verfügbar.",exportColumnName:"Spalten-Name",exportProperty:"Eigenschaften",exportImport:"Importieren"},apis:[{internalID:"api_entitle",name:"Kaufverlauf",desc:"Kann nicht deaktiviert werden. Benutze den Kaufverlauf um die Download-Liste zu erstellen und den PlayStation Plus status festzustellen."},{internalID:"api_game",name:"Katalog",desc:"Einschalten für zusätzliche Spieleinformationen, inklusive Kategorien. Verlangsamt das Erstellen der Download-Liste."},{internalID:"api_queue",name:"Download-Warteschlange",desc:"Erlaubt das Hinzufügen und Entfernen von Titeln in der Download-Warteschlange. Liest die Download-Warteschlangeninformationen und den Aktivierungszustand der Konsole."},{internalID:"api_pstv",desc:'PS TV kompatible Titel wurden festgestellt. Wird nur unterstützt bei "en-us" Internet-Store (nicht die PSDLE Sprache).',disabled:!0}]}},en:{def:"us",us:{local:"English",startup:{apis:"Select which store features you would like to use, hover for more details.<br>Certain store features may not be disabled.",wait:"Please wait.",start:"Start"},columns:{icon:"Icon",name:"Name",platform:"Platform",size:"Size",date:"Date"},labels:{exportView:"Export View",page:"Page"},categories:{downloadable_game:"Games",demo:"Demos",add_on:"Add-ons",unlock:"Unlocks",unlock_key:"Unlock Keys",avatar:"Avatars",theme:"Themes",other:"other",other_game_related:"other_game_related",game_content:"game_content",tumbler_index:"tumbler_index",home:"home",ungrouped_game:"ungrouped_game",promo_content:"promo_content",beta:"Betas",application:"Applications",extras:"Extras",unknown:"Unknown"},strings:{delimiter:"Enter separator:",yes:"Yes",no:"No",search:"Search",dlQueue:"Queue",dlList:"List",plus:"Toggle visibility of PS+ titles.",queueAll:"All",queueTo:"Download to $SYS$",noTarget:"There is no available target console to send to.",exportColumnName:"Column Name",exportProperty:"Property",exportImport:"Import"},apis:[{internalID:"api_entitle",name:"Purchase History",desc:"Cannot be disabled. Uses your purchase history to create the download list and determine PlayStation Plus status."},{internalID:"api_game",name:"Catalog",desc:"Enable for additional game information, including categories. Increases time needed to create the download list."},{internalID:"api_queue",name:"Download Queue",desc:"Allows adding and removing items from the download queue. Reads download queue information and console activation status."},{internalID:"api_pstv",name:"PS TV",desc:'Detect PS TV compatible titles. Only supported on "en-us" web store (not PSDLE language).',disabled:!0}]}},es:{def:"es",es:{author:"Positronic-Brain (#18)",local:"Español",startup:{apis:"Elija APIs a utilizar. Coloque el puntero sobre el API para visualizar detalles.<br>Algunos APIs no pueden ser deshabilitados.",wait:"Por favor espere...",start:"Inicio"},columns:{icon:"Ícono",name:"Nombre",platform:"Plataforma",size:"Tamaño",date:"Fecha"},labels:{exportView:"Exportar vista",page:"Página"},categories:{downloadable_game:"Juegos",demo:"Demos",add_on:"Complementos",unlock:"Desbloqueables",unlock_key:"Llaves",avatar:"Avatares",theme:"Temas",other:"Otros",other_game_related:"Otros",game_content:"Contenidos",tumbler_index:"tumbler_index",home:"Home",ungrouped_game:"No Clasificados",promo_content:"Promociones",beta:"Betas",application:"Aplicaciones",extras:"Extras",unknown:"Desconocido"},strings:{delimiter:"Ingrese delimitador:",yes:"Sí",no:"No",search:"Búsqueda",dlQueue:"Cola de Descargas",dlList:"Lista de Descargas",plus:"Alterna la visibilidad de los títulos de PS Plus.",queueAll:"Todos",queueTo:"Descargar a $SYS$"},apis:[{internalID:"api_entitle",name:"Licencias",desc:"No puede ser deshabilitado. Accede a la información de las compras y se utiliza para construir la lista de descargas, determinar el estado de PS Plus y otras cosas."},{internalID:"api_game",name:"Catálogo",desc:"Accede a información adicional para determinar la consola adecuada, reparar imágenes rotas, y más."},{internalID:"api_queue",name:"Cola de Descargas",desc:"Permite añadir y remover entradas a la cola de descargas. Lee la información de la cola de descargas y el número de consolas activadas en la cuenta."},{internalID:"api_pstv",name:"PS TV",desc:'Detecta títulos compatibles con PS TV. Sólo soportado en la tienda de la región "en-us" (región, no idioma de PSDLE).',disabled:!0}]}},fr:{def:"fr",fr:{author:"cramoisan (#9)",local:"Français",startup:{apis:"Sélectionner l'API à utiliser; Survoler pour plus de détails.<br>Certaines APIs ne peuvent pas être désactivées.",wait:"Merci de patienter.",start:"Commencer"},columns:{icon:"Icône",name:"Nom",platform:"Plate-forme",size:"Taille",date:"Date"},labels:{exportView:"Exporter la vue",page:"Page"},categories:{downloadable_game:"Jeux",demo:"Démos",add_on:"DLCs",unlock:"Codes de déverouillage",avatar:"Avatars",theme:"Thèmes",application:"Applications",unknown:"Inconnu"},strings:{delimiter:"Entrer le délimiteur:",yes:"Oui",no:"Non",search:"Rechercher",dlQueue:"Queue",dlList:"Liste",plus:"Afficher/cacher les titres PS+.",queueAll:"Tous",queueTo:"Télécharger sur $SYS$"},apis:[{internalID:"api_entitle",name:"Droits",desc:"Ne peut pas être désactivée. Accède aux informations d'achat afin de créer la liste de téléchargement, et déterminer le statut PS+, ainsi que d'autres choses."},{internalID:"api_game",name:"Catalogue",desc:"Accède aux informations supplémentaires des jeux pour déterminer la plate-forme, corriger les liens d'images cassés, et plus."},{internalID:"api_queue",name:"Liste de téléchargement",desc:"Permet d'ajouter ou de retirer des articles de la liste de téléchargement. Lit les informations de la liste de téléchargement et le nombre de consoles activées sur le compte."},{internalID:"api_pstv",name:"PS TV",desc:'Détecte les titres compatibles PS TV. Ne marche que sur le store "en-us" (différent de la langue choisie pour PSDLE).',disabled:!0}]}},ja:{def:"jp",jp:{author:"k0ta0uchi (#36)",local:"日本語",startup:{apis:"使用したいAPIを選択してください。ホバーすることによって詳細を確認することができます。<br>特定のAPIは無効化することが出来ない可能性があります。",wait:"お待ちください。",start:"開始"},columns:{icon:"アイコン",name:"ゲーム名",platform:"プラットフォーム",size:"サイズ",date:"日付"},labels:{exportView:"ビューをエクスポート",page:"ページ"},categories:{downloadable_game:"ゲーム",demo:"デモ",add_on:"アドオン",unlock:"アンロック",unlock_key:"アンロックキー",avatar:"アバター",theme:"テーマ",other:"その他",other_game_related:"その他ゲーム関連",game_content:"ゲームコンテンツ",tumbler_index:"タンブラーインデックス",home:"ホーム",ungrouped_game:"未分類のゲーム",promo_content:"プロモコンテンツ",beta:"ベータ",application:"アプリケーション",extras:"エキストラ",unknown:"不明"},strings:{delimiter:"区切り文字を入力してください:",yes:"はい",no:"いいえ",search:"検索",dlQueue:"待機リスト",dlList:"リスト",plus:"PS＋タイトルの表示を切り替える。",queueAll:"全て",queueTo:"$SYS$にダウンロード",noTarget:"送信可能なコンソールが存在しません。",exportColumnName:"カラム名",exportProperty:"プロパティ"},apis:[{internalID:"api_entitle",name:"エンタイトルメント",desc:"無効化することは出来ません。購入情報にアクセスし、ダウンロードリストを作成、PS+の状態を確認、その他を行います。"},{internalID:"api_game",name:"カタログ",desc:"ゲームの追加情報にアクセスし、正確なコンソールの把握、壊れたイメージの修正、その他を行います。"},{internalID:"api_queue",name:"ダウンロード待機リスト",desc:"ダウンロード待機リストからアイテムの追加や削除の許可します。ダウンロード待機リスト情報とアカウントで有効化されたコンソールの数を読み込みます。"},{internalID:"api_pstv",name:"PS TV",desc:'PS TV互換タイトルを検知します。"en-us"ウェブストアでのみサポートされます。（PSDLEの言語設定ではありません）',disabled:!0}]}},nl:{def:"nl",nl:{author:"Tricksy",local:"Nederlands",startup:{apis:"Selecteer welke APIs je wilt gebruiken, hover voor meer details.<br>Sommige APIs kunnen niet gedeselecteerd worden.",wait:"Even geduld alstublieft.",start:"Start"},columns:{icon:"Icoon",name:"Naam",platform:"Platform",size:"Grootte",date:"Datum"},labels:{exportView:"Exporteer View",page:"Pagina"},categories:{downloadable_game:"Spellen",demo:"Demos",add_on:"Add-ons",unlock:"Ontgrendelingen",unlock_key:"Ontgrendelings Sleutels",avatar:"Avatars",theme:"Themas",other:"anders",other_game_related:"ander_spel_gerelateerd",game_content:"spel_inhoud",tumbler_index:"tumbler_index",home:"begin",ungrouped_game:"ongegroepeerd_spel",promo_content:"promo_inhoud",beta:"Betas",application:"Applicaties",extras:"Extras",unknown:"Onbekend"},strings:{delimiter:"Voer delimiter in:",yes:"Ja",no:"Nee",search:"Zoeken",dlQueue:"Wachtrij",dlList:"Lijst",plus:"Laat PS+ titels zien.",queueAll:"Alles",queueTo:"Download naar $SYS$",noTarget:"Er is geen beschikbare console om naar toe te sturen",exportColumnName:"Kolom Naam",exportProperty:"Inhoud"},apis:[{internalID:"api_recht",name:"Rechten",desc:"Kan niet uitgeschakeld worden. Geeft toegang tot betalings informatie om te gebruiken voor de download lijst, bepaald PS+ status, en meer."},{internalID:"api_spel",name:"Catalogus",desc:"Geeft toegang tot extra spel informatie om de goede console te bepalen, kapotte images te fixen, en meer."},{internalID:"api_wachtrij",name:"Download Wachtrij",desc:"Geeft toegang tot het toevoegen en verwijderen van spellen op de download wachtrij. Leest de download wachtrij informatie en het aantal geactiveerde consoles op het account."},{internalID:"api_pstv",name:"PS TV",desc:'Detecteert titels die met PS TV werken. Werkt alleen op de "en-us" web store (niet PSDLE taal).',disabled:!0}]}},pl:{def:"pl",pl:{local:"Polski",startup:{apis:"Zaznacz wybrane opcje; najedź kursorem, aby uzyskać więcej szczegółów.<br>Niektóre opcje nie mogą być odznaczone.",wait:"Proszę czekać.",start:"Start"},columns:{icon:"Ikona",name:"Nazwa",platform:"Platforma",size:"Rozmiar",date:"Data"},labels:{exportView:"Eksportuj",page:"Strona"},categories:{downloadable_game:"Gry",demo:"Dema",add_on:"Dodatki",unlock:"Odblokowane",unlock_key:"Kody",avatar:"Awatary",theme:"Motywy",other:"inne",other_game_related:"inne_związane_z_grami",game_content:"zawartość_gry",tumbler_index:"znacznik",home:"dom",ungrouped_game:"nieprzypisana_gra",promo_content:"zawartość_promocyjna",beta:"Bety",application:"Aplikacje",extras:"Zawartość dodatkowa",unknown:"Nieznane"},strings:{delimiter:"Wstaw separator:",yes:"Tak",no:"Nie",search:"Szukaj",dlQueue:"Kolejka",dlList:"Lista",plus:"Zmień widoczność tytułów PS+.",queueAll:"Wszystko",queueTo:"Pobierz do $SYS$",noTarget:"Nie ma dostępnej konsoli, do której można by wysłać zawartość.",exportColumnName:"Nazwa Kolumny",exportProperty:"Własność",exportImport:"Importuj"},apis:[{internalID:"api_entitle",name:"Historia Zakupów",desc:"Nie może być odznaczona. Historia zakupów zostanie użyta do stworzenia listy objektów do pobrania i określenia, czy jest to zawartość z PS+."},{internalID:"api_game",name:"Katalog",desc:"Zaznaczenie umożliwi podanie dodatkowych informacji, w tym kategorii. Zwiększa czas potrzebny na utworzenie listy."},{internalID:"api_queue",name:"Kolejka pobierania",desc:"Umożliwia dodawanie i usuwanie objektów z kolejki pobierania. Odczytuje informacje o stanie kolejki i sprawdza, czy kosola jest aktywna."},{internalID:"api_pstv",name:"PS TV",desc:'Wykrywanie tytułów kompatybilnych z PS TV. Dostępne wyłącznie na stronie w języku "en - us" (nie w języku PSDLE).',disabled:!0}]}},pt:{def:"br",br:{author:"msvalle (#33)",local:"Português (Brasil)",startup:{apis:"Selecione quais APIs você gostaria de usar, passe o mouse por cima para mais detalhes.<br>Algumas APIs não podem ser desabilitadas.",wait:"Por favor aguarde.",start:"Iniciar"},columns:{icon:"Ícone",name:"Nome",platform:"Platforma",size:"Tamanho",date:"Data"},labels:{exportView:"Exportar Visualização",page:"Página"},categories:{downloadable_game:"Jogos",demo:"Demos",add_on:"Expansões",unlock:"Desbloqueáveis",unlock_key:"Chaves",avatar:"Avatarws",theme:"Temas",other:"Outros",other_game_related:"Outros",game_content:"Conteúdo",tumbler_index:"tumbler_index",home:"Home",ungrouped_game:"Não classificado",promo_content:"Promoções",beta:"Betas",application:"Aplicações",extras:"Extras",unknown:"Desconhecido"},strings:{delimiter:"Entre delimitador:",stringify_error:"Erro: Navegador não possui JSON.stringify.",yes:"Sim",no:"Não",search:"Buscar por título do jogo",dlQueue:"Fila de downlaod",dlList:"Lista de download",plus:"Alterna ver títulos PS+.",queueAll:"Todos",queueTo:"Download para $SYS$"},apis:[{internalID:"api_entitle",name:"Licenças",desc:"Não pode ser desabilitado. Acessa informção de compra usada para criar a lista de download, determinar o status da PS+, e outras coisas."},{internalID:"api_game",name:"Catálogo",desc:"Acessa informação adicional do jogo para determinar o console certo, corrigir imagens quebradas, e mais."},{internalID:"api_queue",name:"Fila de download",desc:"Permite adicionar e remover itens da lista de download. Lê informação da lista de download e quantidade de consoles ativos na conta."},{internalID:"api_pstv",name:"PS TV",desc:'Detecta títulos compatíveis com a PS TV. Somente suportado na web store "en-us" (não o idioma do PSDLE).',disabled:!0}]}},ru:{def:"ru",ru:{author:"GenosseArroganz",local:"Русский",startup:{apis:"Выберите необходимые компоненты (для описания наведите на них указатель мыши).<br>Некоторые компоненты обязательны и не могут быть отключены.",wait:"Подождите…",start:"Начать!"},columns:{icon:"Иконка",name:"Название",platform:"Платформа",size:"Размер",date:"Дата"},labels:{exportView:"Экспорт списка",page:"Страница"},categories:{downloadable_game:"Игры",demo:"Демо",add_on:"Дополнения",unlock:"Разблокировки",unlock_key:"Ключи разблокировки",avatar:"Аватары",theme:"Темы",other:"Другое",other_game_related:"Другой связанный контент",game_content:"Игровой контент",tumbler_index:"tumbler_index",home:"PlayStation Home",ungrouped_game:"Без категории",promo_content:"Промо-материалы",beta:"Бета",application:"Приложения",extras:"Дополнительно",unknown:"Неизвестно"},strings:{delimiter:"Введите разделитель:",yes:"Да",no:"Нет",search:"Поиск",dlQueue:"Очередь загрузок",dlList:"Список загрузок",plus:"Скрыть/показать игры PS+",queueAll:"Все",queueTo:"Загрузить на $SYS$",noTarget:"Не обнаружено подходящего устройства",exportColumnName:"Название столбца",exportProperty:"Свойство"},apis:[{internalID:"api_entitle",name:"История покупок",desc:"Нельзя отключить. История ваших покупок используется для создания списка загрузок и определения статуса PlayStation Plus."},{internalID:"api_game",name:"Каталог",desc:"Больше опций отображения списка, включая категории. Увеличивает время, необходимое для подготовки списка загрузок."},{internalID:"api_queue",name:"Очередь загрузок",desc:"Возможность формировать очередь загрузок. Доступ к информации об очереди загрузок и активированных консолях на аккаунте."},{internalID:"api_pstv",name:"PS TV",desc:"Определяет совместимые с PS TV игры и приложения. Только для американского магазина.",disabled:!0}]}},zh:{def:"tw",tw:{author:"Alexsh",local:"中文 (繁體)",startup:{apis:"請選擇要使用的PS Store功能，滑鼠游標停留以取得項目的詳細資訊<br>部份功能可能無法關閉",wait:"請稍候...",start:"開始"},columns:{icon:"圖示",name:"名稱",platform:"平台",size:"容量",date:"購買日期"},labels:{exportView:"匯出",page:"Page"},categories:{downloadable_game:"遊戲",demo:"體驗版",add_on:"追加內容",unlock:"關卡",unlock_key:"解鎖",avatar:"個人造型",theme:"主題",other:"other",other_game_related:"other_game_related",game_content:"game_content",tumbler_index:"tumbler_index",home:"home",ungrouped_game:"ungrouped_game",promo_content:"promo_content",beta:"Betas",application:"應用程式",extras:"Extras",unknown:"Unknown"},strings:{delimiter:"分隔字元:",yes:"是",no:"否",search:"搜尋",dlQueue:"佇列",dlList:"清單",plus:"選擇顯示PS+遊戲",queueAll:"全部",queueTo:"下載到$SYS$",noTarget:"沒有可傳送的主機。",exportColumnName:"欄位名稱",exportProperty:"屬性"},apis:[{internalID:"api_entitle",name:"購買記錄",desc:"此項不可關閉，將使用購買記錄來建立下載清單及確認PlayStation Plus狀態。"},{internalID:"api_game",name:"類別",desc:"開啟以取得更多遊戲資訊，包括類別及購買時間來建立下載清單。"},{internalID:"api_queue",name:"下載佇列",desc:"允許從下載佇列增加/移除項目。"},{internalID:"api_pstv",name:"PS TV",desc:"偵測Playstation Vita TV相容遊戲。目前只支援en-us區域",disabled:!0}]},cn:{author:"Alexsh",local:"中文 (简体)",startup:{apis:"请选择要使用的PS Store功能，鼠标光标停留以取得项目的详细信息<br>部份功能可能无法关闭",wait:"请稍候...",start:"开始"},columns:{icon:"图示",name:"名称",platform:"平台",size:"容量",date:"购买日期"},labels:{exportView:"汇出",page:"Page"},categories:{downloadable_game:"游戏",demo:"体验版",add_on:"追加内容",unlock:"关卡",unlock_key:"解锁",avatar:"个人造型",theme:"主题",other:"other",other_game_related:"other_game_related",game_content:"game_content",tumbler_index:"tumbler_index",home:"home",ungrouped_game:"ungrouped_game",promo_content:"promo_content",beta:"Betas",application:"应用程序",extras:"Extras",unknown:"Unknown"},strings:{delimiter:"分隔字符:",yes:"是",no:"否",search:"搜寻",dlQueue:"队列",dlList:"清单",plus:"选择显示PS+游戏",queueAll:"全部",queueTo:"下载到$SYS$",noTarget:"没有可传送的主机。",exportColumnName:"域名",exportProperty:"属性"},apis:[{internalID:"api_entitle",name:"购买记录",desc:"此项不可关闭，将使用购买记录来建立下载列表及确认PlayStation Plus状态。"},{internalID:"api_game",name:"类别",desc:"开启以取得更多游戏信息，包括类别及购买时间来建立下载清单。"},{internalID:"api_queue",name:"下载队列",desc:"允许从下载队列增加/移除项目。"},{internalID:"api_pstv",name:"PS TV",desc:"侦测Playstation Vita TV兼容游戏。目前只支持en-us区域",disabled:!0}]}}},determineLanguage:function(e,f){return e=e?e.split("-"):this.config.language.split("-"),!0===f&&(this.lang={},this.lang=$.extend(!0,{},this.lang_cache.en.us)),e[0]in this.lang_cache?e.slice(-1)in this.lang_cache[e[0]]?(!0===f&&($.extend(!0,this.lang,this.lang_cache[e[0]][e.slice(-1)]),this.sanitizeLanguage()),e=e[0]+"-"+e.slice(-1)):(!0===f&&($.extend(!0,this.lang,this.lang_cache[e[0]][this.lang_cache[e[0]].def]),this.sanitizeLanguage()),e=e[0]+"-"+this.lang_cache[e[0]].def):e="en-us",e},sanitizeLanguage:function(){var a=JSON.stringify(this.lang,function(key,value){return"string"==typeof value?value.replace(/'/g,"&apos;"):value});this.lang=JSON.parse(a)},generateLangBox:function(e){var that=this,temp="<select id='lang_select'>";for(var i in e=e?this.determineLanguage(e):this.determineLanguage(),this.lang_cache)for(var h in this.lang_cache[i]){if(this.lang_cache[i][h].local)temp+="<option "+(e==i+"-"+h?"selected='selected'":"")+" value='"+i+"-"+h+"'>"+this.lang_cache[i][h].local+" ["+i+"-"+h+"]</option>"}return temp+="</select>",$(temp).on("change",function(){that.config.language=$(this).val(),that.determineLanguage($(this).val(),!0),that.container.go("startup")})},config:{timerID:0},init:function(){console.log("PSDLE | Init.");var match=window.location.pathname.match(/^\/([a-z\-]+)\//i),l=(null!==match&&match.length>1?match.pop():"en-us").toLowerCase(),l2=l.split("-"),instance=Ember.Application.NAMESPACES_BY_ID["valkyrie-storefront"].__container__;this.config=$.extend(this.config,{valkyrieInstance:instance,game_page:window.location.origin+"/"+l+"/product/",game_api:"https://store.playstation.com/store/api/chihiro/00_09_000/container/"+l2.slice(-1)+"/"+l2[0]+"/999/",lastsort:"",lastsort_r:!1,language:l,deep_search:!1,last_search:"",dlQueue:!1,active_consoles:{},has_plus:!1,check_tv:!1,iconSize:42,mobile:!1,storeURLs:instance.lookup("service:store-root").get("user").fetchStoreUrls()._result,includeExpired:!1}),console.log("PSDLE | Config set."),this.determineLanguage(this.config.language,!0),this.injectCSS(),this.genStartup()},genStartup:function(){if(0==$("#psdle_start").length){var that=this;psdleSkip&&1==psdleSkip?this.container.go("startup"):$("<div/>",{class:"psdle_logo startup"}).click(function(){$(this).remove(),that.container.go("startup")}).appendTo("body")}},container:{elemID:"muh_games_container",subElemID:"sub_container",go:function(target,cb){switch(target){default:case"startup":this.respawn(this.startup());break;case"progress":this.respawn(this.progress());break;case"dlList":this.respawn(this.dlList().append(this.tagline()),function(){repod.psdle.table.regen(!0),repod.psdle.table.margin()});break;case"dlQueue":repod.psdle.dlQueue.generate.display()}},respawn:function(content,cb){var that=this;0==$("#"+this.elemID).length&&$("<div />",{id:this.elemID,class:"valkyrie"}).appendTo("body"),$("#"+this.elemID).slideUp(function(){$(this).children().remove(),$(this).append(content).toggleClass("psdledark",that.dark).toggleClass("rtl",!!repod.psdle.lang.rtl&&1==repod.psdle.lang.rtl).slideDown(function(){"function"==typeof cb&&cb()})})},dark:!1,darkCSS:function(){this.dark=!this.dark,$("#"+this.elemID).toggleClass("psdledark",this.dark)},header:function(){return"<span><a href='//repod.github.io/psdle/' target='_blank'><div class='psdle_logo'></div></a><br><small>v"+repod.psdle.version+" <small>"+repod.psdle.versiondate+"</small></small></span>"},tagline:function(){var that=this,t=$("<div />",{class:"psdle tagline"});return t.append($("<span />",{id:"psdle_night",text:"Night Mode"}).on("click",function(){that.darkCSS()})).append("<br><a href='//repod.github.io/psdle#support' target='_blank'>Support PSDLE</a> | <a href='//github.com/RePod/psdle/wiki/Submit-a-Bug-or-Translation' target='_blank'>Submit Bug/Translation</a> | ").append($("<span />",{id:"dump_raw",text:"Dump Raw"}).on("click",function(){repod.psdle.macrossBrain(function(raw){repod.psdle.exportList.download("_raw.json",JSON.stringify(raw))})})).append(" | ").append($("<span />",{id:"inject_lang",text:"Inject Language"}).on("click",function(){repod.psdle.debug.inject_lang()})),t},startup:function(){var config=repod.psdle.config,lang=repod.psdle.lang,sub=$("<div />",{id:this.subElemID}).append(this.header()).append("<br><br>"+lang.startup.apis+"<br><br>"),bar=$("<span />",{class:"psdle_fancy_bar"});$.each(lang.apis,function(key,con){if("api_pstv"==con.internalID)return 0;$("<span />",{id:con.internalID,class:"api_game"==con.internalID||con.disabled?"toggled_off":"","data-tooltip":con.desc.replace(/'/g,"&apos;"),text:con.name.replace(/'/g,"&apos;")}).on("click",function(){"api_entitle"!==$(this).attr("id")&&$(this).toggleClass("toggled_off")}).appendTo(bar)});var goBtn=$("<span />",{id:"psdle_go",class:"psdle_btn",text:lang.startup.start}).on("click",function(){config.deep_search=!$("#api_game").hasClass("toggled_off"),config.dlQueue=!$("#api_queue").hasClass("toggled_off"),config.check_tv=!!$("#api_pstv").length&&!$("#api_pstv").hasClass("toggled_off"),repod.psdle.generateList()});return sub.append(bar).append("<br><br>").append(goBtn).append("<br>").append(repod.psdle.generateLangBox()).append("<br><br>").append(this.tagline()),sub},progress:function(){return $("<div />",{id:this.subElemID}).append(this.header()+"<br>").append($("<progress />",{id:"startup_progress"})).append("<br><span id='psdle_status'>"+repod.psdle.lang.startup.wait+"</span>")},postRuns:{},postList:function(result){return result&&(this.postRuns[result]=!0),repod.psdle.config.check_tv&&!0!==this.postRuns.tv?(this.go("progress"),void repod.psdle.tv.init()):repod.psdle.config.deep_search&&!0!==this.postRuns.catalog?(this.go("progress"),void repod.psdle.game_api.run()):(repod.psdle.config.dlQueue&&repod.psdle.dlQueue.batch.init(),void this.go("dlList"))},dlList:function(){return repod.psdle.genSysCache(),repod.psdle.genPropCache(),repod.psdle.config.lastsort="",repod.psdle.config.lastsort_r=!1,repod.psdle.table.gen()},menu:{gen:function(menu){var r=$("<div />",{class:"menu"});return r.append(this.dlList()),r},dlList:function(){var lang=repod.psdle.lang,r=$("<div />",{text:lang.labels.exportView}),groups=[this.helpers.auto_systems()];return repod.psdle.config.deep_search&&groups.push(this.helpers.auto_categories()),$.each(groups,function(i,v){var group=$("<fieldset />");$.each(v,function(j,w){group.append(w)}),group.appendTo(r)}),r},helpers:{genCheckbox:function(cbName,cbValue,cbLabel){return $("<label />",{text:cbLabel}).prepend($("<input />",{type:"checkbox",checked:"checked",name:cbName,value:cbValue}))},auto_systems:function(){var that=this,sysCache=repod.psdle.sys_cache,filterSystems=[];return $.each(["ps1","ps2","ps3","ps4","ps5","vr","psp","vita"],function(i,v){sysCache.hasOwnProperty(v)&&filterSystems.push(that.genCheckbox("system",v,sysCache[v]))}),filterSystems},auto_categories:function(){var that=this,lang=repod.psdle.lang,typeCache=repod.psdle.type_cache,filterCache=["downloadable_game","demo","unlock","add_on","avatar","application","theme","unknown"],tempCache=[];return $.each(typeCache,function(key){var item=that.genCheckbox("category",key,lang.categories[key]||key);filterCache.indexOf(key)>=0?filterCache[filterCache.indexOf(key)]=item:tempCache.push(item)}),filterCache.concat(tempCache)}}}},macrossBrain:function(callback){this.config.valkyrieInstance.lookup("service:macross-brain").macrossBrainInstance.getEntitlementStore().getAllEntitlements().then(function(entitlements){callback(entitlements)})},generateList:function(entitlements){var that=this;if(entitlements=window.psdleEnts||entitlements){console.log("PSDLE | Generating download list."),this.gamelist=[];var i18n=this.config.valkyrieInstance.lookup("service:i18n"),validContent=(entitlements=(entitlements||this.config.valkyrieInstance.lookup("service:macross-brain").macrossBrainInstance._entitlementStore._storage._entitlementMapCache).concat(this.e_inject_cache),0);$.each(entitlements,function(index,obj){if(that.isValidContent(obj)){var temp={};temp.indexRaw=++index,temp.indexValid=++validContent,temp.productID=obj.product_id,temp.id=obj.id,that.config.deep_search&&(temp.category="unknown"),that.pid_cache[temp.productID]?that.pid_cache[temp.productID]++:that.pid_cache[temp.productID]=1,obj.entitlement_attributes?(obj.game_meta&&(temp.name=obj.game_meta.name,temp.api_icon=obj.game_meta.icon_url),temp.size=obj.entitlement_attributes[0].package_file_size,temp.platform="ps5"==obj.entitlement_attributes[0].platform_id?["PS5"]:["PS4"],temp.pkg=obj.entitlement_attributes[0].reference_package_url):obj.drm_def&&(temp.name=obj.drm_def.contentName?obj.drm_def.contentName:obj.drm_def.drmContents[0].titleName?obj.drm_def.drmContents[0].titleName:"Unknown! - Submit a bug report!",temp.api_icon=obj.drm_def.image_url,temp.size=obj.drm_def.drmContents[0].contentSize,temp.platform=[],temp.baseGame=obj.drm_def.drmContents[0].titleName,temp.publisher=obj.drm_def.drmContents[0].spName,temp.pkg=obj.drm_def.drmContents[0].contentUrl,temp.platform=that.determineSystem(obj.drm_def.drmContents[0].platformIds)),temp.icons=[that.config.game_api+temp.id+"/image",that.config.game_api+temp.productID+"/image",temp.api_icon],temp.date=obj.active_date;var tempDate=new Date(temp.date),toPrettyDate={mm:tempDate.getMonth()+1,dd:tempDate.getDate(),yyyy:tempDate.getFullYear()};temp.prettyDate=i18n.t("c.format.numericDateSlashes",toPrettyDate).string,temp.dateUnix=tempDate.getTime()/1e3;var tempSize=require("valkyrie-storefront/utils/download").default.getFormattedFileSize(temp.size);temp.prettySize=0===temp.size?"N/A":i18n.t("c.page.details.drmDetails."+tempSize.unit,{val:tempSize.value}).string,temp.url=repod.psdle.config.game_page+temp.productID,temp.platformUsable=temp.platform.slice(0),!obj.drm_def&&obj.inactive_date&&(temp.plus=!0),obj.license&&obj.license.expiration&&(temp.plus=!0),temp.plus&&(that.config.has_plus=!0),that.gamelist.push(temp)}}),this.gamelist.sort(function(a,b){return a.date>b.date?-1:a.date<b.date?1:0}),$.each(this.pid_cache,function(i,v){v>1||delete that.pid_cache[i]});var downloadListController=require("valkyrie-storefront/pods/download/list/controller").default.create();$.each(this.gamelist,function(a,b){that.gamelist[a].index=a+1,that.gamelist[a].dlListPage=Math.ceil(that.gamelist[a].index/downloadListController.pageSize),that.config.deep_search&&that.game_api.queue(a+1,that.pid_cache[b.productID]>1?b.id:b.productID)}),downloadListController.destroy(),console.log("PSDLE | Finished generating download list. End result is "+this.gamelist.length+" of "+entitlements.length+" item(s).",this.stats),repod.psdle.container.postList()}else this.macrossBrain(function(e){that.generateList(e)})},determineSystem:function(HASH){var sys=[],K=require("valkyrie-storefront/utils/const").default.KamajiPlatformFlags,K2=require("valkyrie-storefront/utils/const").default.KamajiPlatforms,_K=K;return $.each(_K,function(t,u){var target=K2[t];0!=("1"==t?HASH>>>1&u>>>1:HASH&u)&&sys.push(target)}),sys},stats:{fine:0,generic:0,expired:0,service:0,video:0},isValidContent:function(obj){var exp=obj.license?obj.license.expiration:obj.inactive_date,inf=!!obj.license&&obj.license.infinite_duration;return!this.config.includeVideo&&(obj.VUData||obj.drm_def&&"TV"==obj.drm_def.contentType)?(this.stats.video++,0):1==obj.entitlement_type||4==obj.entitlement_type?(this.stats.service++,0):0==inf&&!0!==this.config.includeExpired&&new Date(exp)<new Date?(this.stats.expired++,0):obj.drm_def||obj.entitlement_attributes?(this.stats.fine++,1):(this.stats.generic++,0)},genSysCache:function(){var that=this;$.each(this.gamelist,function(i,v){var name=that.safeGuessSystem(v.platform),key=name.toLowerCase().replace("ps ","");that.sys_cache[key]=name})},genPropCache:function(){var that=this,bad=["metadata"];this.prop_cache=["empty"],$.each(this.gamelist,function(i,c){$.each(c,function(key){-1==$.inArray(key,bad)&&-1==$.inArray(key,that.prop_cache)&&that.prop_cache.push(key)})}),this.prop_cache.push("vitaCompat"),this.config.check_tv&&this.prop_cache.push("vitatvCompat"),this.prop_cache.sort()},table:{bindSearch:function(){$(document).off("click","[id^=psdle_index_]").on("click","[id^=psdle_index_]",function(e){e.preventDefault(),e.shiftKey?repod.psdle.dlQueue.batch.auto(this):repod.psdle.dlQueue.batch.add.ask(this)})},gen:function(){$("#muh_games_container").css({position:"absolute"});var sub=$("<div />",{id:repod.psdle.container.subElemID}).append(this.header.gen()).append("<div class='psdle_table'><table><thead><tr><th>"+repod.psdle.lang.columns.icon+"</th><th id='sort_name'>"+repod.psdle.lang.columns.name+"</th><th title='Approximate, check store page for all supported platforms.'>"+repod.psdle.lang.columns.platform+"</th><th id='sort_size'>"+repod.psdle.lang.columns.size+"</th><th id='sort_date'>"+repod.psdle.lang.columns.date+"</th></tr></thead><tbody></tbody></table></div>");return sub.find("th[id^=sort_]").on("click",function(){repod.psdle.sortGamelist($(this))}),this.bindSearch(),console.log("PSDLE | Table generated."),sub},header:{newSearch:{gen:function(){var r=$("<div />",{class:"search options container"}),sys=this.helpers.auto_systems(this.children.filter);if($.each(sys,function(i,v){r.append(v)}),repod.psdle.config.deep_search){var cats=this.helpers.auto_categories(this.children.filter);$.each(cats,function(i,v){r.append(v)})}return r.prepend(this.children.input()),r},helpers:{auto_systems:function(filter){var sysCache=repod.psdle.sys_cache,filterSystems=[];return $.each(["ps1","ps2","ps3","ps4","vr","psp","vita"],function(i,v){sysCache.hasOwnProperty(v)&&filterSystems.push(filter(sysCache[v],{type:"system"}))}),filterSystems},auto_categories:function(filter){var lang=repod.psdle.lang,typeCache=repod.psdle.type_cache,filterCache=["downloadable_game","demo","unlock","add_on","avatar","application","theme","unknown"];return $.each(typeCache,function(key){var item=filter(lang.categories[key]||key,{type:"category",target:key});filterCache.indexOf(key)>=0?filterCache[filterCache.indexOf(key)]=item:filterCache.push(item)}),filterCache}},bind:function(){},children:{input:function(){var that=this;return $("<input />",{class:"search options syntax"}).on("keypress",function(i){13==i.keyCode&&$(i.target.parentNode).append(that.filter(i.target.value))})},filter:function(value,data){var fContainer=$("<div />",{class:"search options filter container"});data&&data.type&&fContainer.addClass(data.type);var fClose=$("<div />",{class:"search options filter close",text:"X"}).on("click",function(i){i.target.parentNode.remove()}),fText=$("<div />",{class:"search options filter value",text:value});return fContainer.prepend(fClose).append(fText)[0]}}},gen:function(dlQueue){return $("<div />",{class:"search main container"}).append(this.searchOptions(dlQueue)).append(this.stats(dlQueue))},searchOptions:function(dlQueue){var r=$("<div />",{class:"search options container"}),lang=repod.psdle.lang,regenFunc=function(){$(this).toggleClass("toggled_off"),repod.psdle.table.regen(!0)};dlQueue||r.append($("<span />",{class:"psdle_fancy_bar"}).append($("<span />",{id:"export_view",text:lang.labels.exportView}).on("click",function(){repod.psdle.exportList.configure()})));var systems=$("<span />",{class:"psdle_fancy_bar search options system"}),order=["ps1","ps2","ps3","ps4","ps5","vr","psp","vita"];if($.each(order,function(i,v){repod.psdle.sys_cache.hasOwnProperty(v)&&$("<span />",{id:"system_"+v,text:repod.psdle.sys_cache[v]}).on("click",regenFunc).appendTo(systems)}),systems.appendTo(r),repod.psdle.config.dlQueue){var nid=dlQueue?"dl_list":"dl_queue",n=dlQueue?"dlList":"dlQueue",tr=lang.strings[n];$("<span />",{class:"psdle_fancy_but",id:nid,text:tr}).on("click",function(){repod.psdle.container.go(n)}).appendTo(r)}if(!dlQueue&&repod.psdle.config.deep_search){var categories=$("<div />",{class:"psdle_fancy_bar search options categories"});order=["downloadable_game","demo","unlock","add_on","avatar","application","theme","unknown"];$.each(repod.psdle.type_cache,function(key){var i=$("<span />",{id:"filter_"+key,text:lang.categories[key]||key}).on("click",regenFunc);order.indexOf(key)>=0?order[order.indexOf(key)]=i:order.push(i)}),$.each(order,function(i,v){"object"==typeof v&&v.appendTo(categories)}),categories.appendTo(r)}if(!dlQueue){var textSearch=$("<div />"),sel=$("<select />",{id:"psdle_search_select",class:"search input select"}),keys={name:lang.columns.name,base:"Base Game",publisher:"Publisher",id:"Item ID",pid:"Product ID"};repod.psdle.config.deep_search&&(keys.genre="Genre"),$.each(keys,function(i,v){$("<option />",{value:i,text:v}).appendTo(sel)}),sel.on("change",function(){repod.psdle.table.regen(!0)}).appendTo(textSearch),$("<input />",{id:"psdle_search_text",class:"search input text",type:"text",list:"searchAutocomplete",placeholder:lang.strings.search}).on("blur keypress",function(e){("keypress"!=e.type||13===e.which&&$(this).is(":focus"))&&repod.psdle.table.regen(!0)}).appendTo(textSearch),$("<datalist />",{id:"searchAutocomplete"}).appendTo(textSearch),textSearch.appendTo(r)}return r},stats:function(dlQueue){if(!dlQueue){var current=$("<span />",{class:"search stats all current"}),total=$("<span />",{class:"search stats all total"}),psswitch=$("<input />",{type:"checkbox",class:"search input plus",readonly:!0}).prop({indeterminate:!0}).click(function(){this.readOnly?this.checked=this.readOnly=!1:this.checked||(this.readOnly=this.indeterminate=!0),repod.psdle.table.regen(!0)}),switchContainer=$("<span />",{class:"search stats plus","data-tooltip":repod.psdle.lang.strings.plus}).append("(").append(psswitch).append(" ").append($("<span />",{class:"search stats plus total"})).append(")");return $("<div />",{class:"psdleSearchStats"}).append(current).append(" ").append(switchContainer).append(" / ").append(total)}}},regen:function(a){if(1==a)repod.psdle.determineGames();else{var temp="",plus=0;repod.psdle.exportList.delimited.destroy(),$.each(repod.psdle.gamelist_cur,function(a,val){val.plus&&plus++,temp+=repod.psdle.table_utils.gen.row(val)}),temp+=repod.psdle.table_utils.gen.totals(),$(".search.stats.all.current").text(repod.psdle.gamelist_cur.length),$(".search.stats.all.total").text(repod.psdle.gamelist.length),$(".search.stats.plus.total").text(plus),$("datalist#searchAutocomplete").empty(),$.each(repod.psdle.autocomplete_cache,function(i,v){$("<option />",{value:v}).appendTo("datalist#searchAutocomplete")}),$(".psdle_table tbody").html(temp),this.icons.select()}},plus_switch:function(){this.regen(!0)},margin:function(){$(".psdle_table").animate({"margin-top":$(".search.main.container").outerHeight()-$("#sub_container").css("padding-top").replace("px","")+"px"}),this.icons.smartScroll()},icons:{select:function(type){var that=this;$(document).off("scroll").on("scroll",function(){that.smartScroll()}),this.smartScroll()},toSize:function(url,size){return size=size||repod.psdle.config.iconSize||42,url+(/\?w=\d+&h=\d+$/.test(url)?"":"?w="+size+"&h="+size)},validate:function(index){var that=this,temp=(index=Number(index),repod.psdle.gamelist[index]);if(temp.safe_icon)that.setIcon(index);else{repod.psdle.config.iconSize;var u=temp.icons.shift(),url=this.toSize(u);if(void 0==u)return temp.safe_icon=!0,temp.icon=temp.api_icon,that.setIcon(index),0;$.get(url).success(function(){$.extend(repod.psdle.gamelist[index],{safe_icon:!0,icon:u}),that.setIcon(index)}).fail(function(e){that.validate(index)})}},setIcon:function(index){$("#psdle_index_"+index+" .psdle_game_icon").attr("src",this.toSize(repod.psdle.gamelist[index].icon))},smartScroll:function(){var that=this,low=window.scrollY,high=low+window.innerHeight,t=[];$("[id^=psdle_index_]").filter(function(index,item){return index%10==0}).each(function(i,item){var pos=$(item).offset().top;if(pos>high)return!1;pos>=low&&t.push(item)});var first=Math.max(0,$(t[0]).index()-10),last=$(t.pop()).index()+10;$("[id^=psdle_index_]").slice(first,last).each(function(a){1!==$(this).data("icon")&&($(this).data("icon",1),that.validate($(this).attr("id").split("_").pop()))})}}},determineGames:function(){this.exportList.delimited.destroy(),this.gamelist_cur=[],this.autocomplete_cache=[];var that=this,safesys=this.safeSystemCheck(),search=$("#psdle_search_text")?$("#psdle_search_text").val():this.config.last_search,cache=[],filters={};$.each($("[id^=filter_]"),function(){var n=$(this).attr("id").split("_").splice(1).join("_");filters[n]=$(this).hasClass("toggled_off")}),$("#psdle_search_text").removeClass("negate_regex"),$.each(this.gamelist,function(index,val){var sys=that.safeGuessSystem(val.platform),a=!0,t="";switch($("#psdle_search_select").val()){default:case"name":t=val.name;break;case"id":t=val.id;break;case"pid":t=val.productID;break;case"date":t=val.date;break;case"publisher":t=val.publisher;break;case"desc":val.description?t=val.description:a=!1;break;case"genre":val.genre?t=val.genre.join(","):a=!1;break;case"base":val.baseGame?t=val.baseGame:a=!1}if($.inArray(sys,safesys)>-1){if(that.config.deep_search&&filters[val.category]&&(a=!1),1==a&&""!==search){var regex=search.match(/^\/(.+?)\/([imgdp]+)?$/i);(a=!!(regex&&regex[2]&&regex[2].toLowerCase().indexOf("d")>=0))&&($("#psdle_search_text").addClass("negate_regex"),regex[2]=regex[2].replace("d","")),regex?RegExp(regex[1]?regex[1]:search,regex[2]?regex[2]:"").test(t)&&(a=!a):t&&t.toLowerCase().indexOf(search.toLowerCase())>=0&&(a=!a)}1==a&&($(".search.input.plus").prop("checked")?a=1==val.plus:$(".search.input.plus").prop("indeterminate")||$(".search.input.plus").prop("checked")||(a=!(1==val.plus))),1==a&&(that.gamelist_cur.push(val),-1==$.inArray(t,cache)&&(cache.push(t),that.autocomplete_cache.push(t)))}}),that.config.last_search=search,this.sortGamelist("noreverse")},sortGamelist:function(sort_method){var rev=!0;switch("noreverse"==sort_method?(rev=!1,sort_method=this.config.lastsort?this.config.lastsort:"sort_date"):sort_method=sort_method?$(sort_method).attr("id"):this.config.lastsort?this.config.lastsort:"sort_date",sort_method){default:case"sort_date":this.gamelist_cur.sort(function(a,b){return a.date>b.date?-1:a.date<b.date?1:0});break;case"sort_name":this.gamelist_cur.sort(function(a,b){return a.name.toLocaleLowerCase()>b.name.toLocaleLowerCase()?1:a.name.toLocaleLowerCase()<b.name.toLocaleLowerCase()?-1:0});break;case"sort_size":this.gamelist_cur.sort(function(a,b){return a.size>b.size?1:a.size<b.size?-1:0})}1==rev?sort_method==this.config.lastsort?(this.config.lastsort_r||this.gamelist_cur.reverse(),this.config.lastsort_r=!this.config.lastsort_r):this.config.lastsort_r=!1:this.config.lastsort_r&&this.gamelist_cur.reverse(),$("#psdle_sort_display").remove(),$("#"+sort_method).append("<span id='psdle_sort_display' class='psdle_sort_"+(this.config.lastsort_r?"asc":"desc")+"' />"),this.config.lastsort=sort_method,this.table.regen()},safeSystemCheck:function(){var temp=[];return $("span[id^=system_]:not('.toggled_off')").each(function(){temp.push($(this).text())}),temp},safeGuessSystem:function(sys_in){var sys="object"==typeof sys_in?sys_in.join(" "):sys_in;return"PS3 PSP PS Vita"==(sys=sys.replace(/[^\w\d ]/g,""))||"PS3 PSP"==sys||"PS Vita PSP"==sys||sys.indexOf("PSP")>-1?sys="PSP":"PS3 PS Vita"==sys||sys.indexOf("PS Vita")>-1?sys="PS Vita":"PS3"==sys||sys.indexOf("PS3")>-1?sys="PS3":"PS VR"==sys||sys.indexOf("PS VR")>-1?sys="PS VR":"PS4"==sys||sys.indexOf("PS4")>-1?sys="PS4":("PS5"==sys||sys.indexOf("PS5")>-1)&&(sys="PS5"),sys},injectCSS:function(){$("head").append('<style type="text/css">div.amopromo{margin-bottom:1em}div.amopromo a,div.amopromo a:hover{text-decoration:unset;color:unset}div.amopromo .psdle_btn{margin:unset}div.amopromo .psdle_btn:hover{margin:unset}div.amopromo>div{font-size:small}.valkyrie #export_table input,.valkyrie #export_table select,.valkyrie #lang_select{height:unset;padding:unset;margin:unset;width:unset;display:unset}.psdle_logo{display:inline-block;width:84px;height:31px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAAfCAYAAAEO89r4AAABaUlEQVRoge2XS27CQAyGPSVSUVErdqzpMqveiRvALnu67Gl6D+gFuAKIPgQrs0o1TJSJJ7aJBvnbRXE8f357XoCIGyTiEBFf33+BwgMpyg/eVRNSsENEpAQWMa27agL1e7JWcmCSVSG+tF6jp1D4o/qkqN8un+Bl7JpJUxP5vH38XT2T655CtEf6olKoaFLq3ElK2heRlgq//U/KKVj4rcrvs+Y+h7Z1ow2Vv9eg6A5p53MxhnI2an0vWSmW0HI2EhUTI5vSN4T2Xem0ycZRh4h7AJgOLaQLlf1ega2br3/IQlMW6TA2dYEPc2XToyZUGtbOdMs1lyX0lqeubEpvQqVp9GhsghxPOpvY8yPA1yo+MRtCh7iWfJ/j49rOpEE2QnM55h1U7/Wcox0nb+y9lqY6dzYtmgtmqDBmqDBmqDCDGcq5Ew5xCqViHSqMGSqMGSqMGSpMp6H3unloYR0qjBkqjBkqjBkqzAUtBKxj5lT3GAAAAABJRU5ErkJggg==)}.startup{z-index:10000;position:fixed;bottom:10px;left:10px;cursor:pointer;box-shadow:0 0 10px #fff}#muh_games_container{display:none;position:absolute;top:0;right:0;left:0;color:#000;z-index:10000;text-align:center}#sub_container{padding:20px;background-color:#fff}#startup_progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:400px;height:16px;border:1px solid #999;overflow:hidden;border-radius:10px;margin:10px;color:#2185f4!important}#startup_progress::-moz-progress-bar{background-color:#2185f4!important}#startup_progress::-webkit-progress-value{background-color:#2185f4!important}.psdle_btn{background-color:#2185f4}.psdle_btn{cursor:pointer;border-radius:13px;color:#fff;padding:1px 15px;display:inline-block;margin:5px auto}.psdle.tagline{font-size:small}.psdle.tagline>a,.psdle.tagline>span{line-height:0;cursor:pointer;color:#7f6d75!important}.psdle.tagline>a:hover,.psdle.tagline>span:hover{color:inherit!important;text-decoration:underline}.search.options.syntax{display:block;text-align:center;width:500px;margin:auto;margin-bottom:1em;border:none;border-bottom:1px solid #000}.search.options.filter.container{display:inline-block;background-color:#2185f4;color:#fff;margin:0 .3em;cursor:default}.search.options.filter.container .value{display:inline-block;padding:0 .2em;text-align:center}.search.options.filter.container.system .value{background-color:red}.search.options.filter.container.category .value{background-color:green}.search.options.filter.close{display:inline-block;color:#fff;padding:0 .3em;cursor:pointer}.search.options.filter.close:hover{background-color:rgba(255,51,0,.8)}.search.options.container{margin-bottom:20px}.search.main.container{position:fixed;left:0;top:0;width:100%;padding:15px 0;background-color:rgba(255,255,255,.8);z-index:10000}.search.input.plus{cursor:pointer!important}.search.export{display:inline;width:95%;max-width:600px}.psdle_table,table{text-align:left;display:inline-block;border-collapse:initial}th[id^=sort]{cursor:pointer}th[id^=sort]:hover{background-color:#62a5f0}th{padding:5px!important;background-color:#2185f4;color:#fff;border:none;transition:background-color .3s}tr:hover{background-color:rgba(33,133,244,.7)!important}.valkyrie td{padding:0;border:none}td a.psdle_game_link{display:block;width:100%;height:100%;color:#000;padding:8px!important}.psdle_game_icon.is_plus{background-color:#ffd10d}tr[id^=psdle_index_].is_plus td:last-child{border-right:#ffd10d 3px solid}tr:nth-child(2n){background-color:#eee}td{text-align:center}td:nth-child(2),th:nth-child(2){text-align:left!important}#psdle_search_select,#psdle_search_text{font-size:large;padding:5px 10px;border:1px solid #f0f0f0;display:inline-block;width:auto}#psdle_search_select{background-color:#f0f0f0;text-align:center}#psdle_search_text{font-size:large;max-width:480px;width:100%}.negate_regex{background-color:#ff8080!important;color:#fff}.psdle_fancy_bar>span,.psdle_fancy_but,span#export_view,span[id^=dl_],span[id^=filter_],span[id^=system_]{font-weight:700;font-size:.9em;color:#fff;background-color:#2185f4;display:inline-block;margin-right:2px;margin-bottom:5px;padding:1px 10px;cursor:pointer}.psdle_fancy_but{border-radius:12px}#muh_games_container:not(.rtl) .psdle_fancy_bar>span:first-of-type{border-top-left-radius:12px;border-bottom-left-radius:12px}#muh_games_container:not(.rtl) .psdle_fancy_bar>span:last-of-type{border-top-right-radius:12px;border-bottom-right-radius:12px}.toggled_off{background-color:rgba(33,133,244,.4)!important}#muh_games_container:not(.rtl) #psdle_search_select{border-radius:90px 0 0 90px}#psdle_search_text{border-radius:0 90px 90px 0}.psdle_game_icon{max-width:100%;vertical-align:middle;padding:3px;width:42px;height:42px}.psdle_sort_asc,.psdle_sort_desc{float:right;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent}.psdle_sort_asc{border-bottom:5px solid #fff}.psdle_sort_desc{border-top:5px solid #fff}#dlQARating,#dlQAStat{color:#fff;background-color:rgba(33,133,244,.8);font-size:small}#dlQueueAsk{width:400px;height:400px}#dlQAN{background-color:rgba(33,133,244,.8);padding:7px 15px;color:#fff;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#dlQASys{position:absolute;bottom:0;padding:7px 0;color:#fff;display:table;width:100%;table-layout:fixed}#dlQASys>div{display:table-cell}#dlQASys>div>div{cursor:pointer;background-color:rgba(33,133,244,.8);border-radius:10px;padding:2px;margin:0 10px;box-shadow:0 0 30px #000;transition:background-color .5s,box-shadow .5s}#dlQASys>div>div:hover{background-color:rgba(33,133,244,1);box-shadow:0 0 30px rgba(33,133,244,1)}#dlQAStat{border-bottom-left-radius:20px;padding:0 10px 0 15px;float:right}#dlQARating{border-bottom-right-radius:20px;padding:0 15px 0 10px;float:left}.success{background-color:#237423!important}.failure{background-color:#a43636!important}#dlQueueExt{overflow:hidden;position:absolute;left:10px;right:10px;bottom:40px;font-size:.8em;background-color:rgba(33,133,244,.8);padding:10px;border-radius:9px;top:66px;text-align:left}.cover,.cover>div>div{background-size:cover}.cover{z-index:10000;position:fixed;top:0;left:0;width:100%;height:100%;display:table;background-color:rgba(0,0,0,.25);background-position:center}.cover>div{display:table-cell;vertical-align:middle;height:inherit;text-align:center}.cover>div>div{box-shadow:0 0 30px #000;display:inline-block;background-color:#fff;border-radius:20px;overflow:hidden;position:relative}#export_select{padding:10px;background-color:#fff;color:#000}#export_select>div{border-top-left-radius:10px;border-top-right-radius:10px;overflow-y:auto;overflow-x:hidden;max-height:490px}#export_table{width:100%}#export_table th{text-align:center}#export_table .orderUp{cursor:pointer;height:1em;border-left:.4em solid transparent;border-right:.4em solid transparent;border-bottom:.9em solid rgba(0,0,0,.2);display:inline-block;padding:1px;margin:0 3px}#export_table .orderUp:hover{border-bottom-color:#000}#slider,.handle{display:inline-block}#slider{vertical-align:bottom;cursor:pointer;width:30px;height:12px;border-radius:10px;border:2px solid #f0f0f0}.handle_container{text-align:center;width:100%;height:100%}.handle{width:10px;height:10px;border-radius:100%;margin:0 2px 6px;border:1px solid #fff;background-color:#85c107}[data-tooltip]{position:relative;z-index:2;cursor:pointer}[data-tooltip]:after,[data-tooltip]:before{visibility:hidden;opacity:0;pointer-events:none}[data-tooltip]:before{--width:300px;position:absolute;top:150%;left:50%;margin-left:calc(var(--width)/2*-1);padding:7px;width:var(--width);border-radius:3px;background-color:rgba(33,133,244,.9);color:#fff;content:attr(data-tooltip);text-align:center;font-size:.9em;line-height:1.2;box-shadow:0 0 10px #fff}[data-tooltip]:after{position:absolute;top:calc(150% - 5px);left:50%;margin-left:-5px;width:0;border-bottom:5px solid rgba(33,133,244,.9);border-right:5px solid transparent;border-left:5px solid transparent;content:" ";font-size:0;line-height:0}[data-tooltip]:hover:after,[data-tooltip]:hover:before{visibility:visible;opacity:1}.ui-autocomplete{z-index:9002;max-width:590px;max-height:200px;overflow-y:auto;overflow-x:hidden}.ui-menu{position:fixed;border:2px solid #f0f0f0;border-top:none;background-color:#fff}.ui-menu>.ui-menu-item *{color:#000;text-decoration:none;white-space:nowrap;text-overflow:ellipsis;cursor:pointer}.ui-menu>.ui-menu-item:nth-child(even){background-color:#e6e6e6}.ui-menu-item .ui-state-focus{display:inline-block;width:100%;color:#000;background-color:rgba(33,133,244,.7)}.psdletv{font-style:italic;font-weight:700;font-size:.6em;vertical-align:text-top;position:absolute;top:4px}.psp3{border-left:2px solid #2185f4;border-right:2px solid #2185f4}.psp2{background-color:rgba(33,133,244,.15)!important}#muh_games_container.rtl{direction:rtl}.rtl #psdle_search_select{border-radius:0 90px 90px 0}.rtl #psdle_search_text{border-radius:90px 0 0 90px}.rtl .psdle_fancy_bar span:last-of-type{border-top-left-radius:12px;border-bottom-left-radius:12px}.rtl .psdle_fancy_bar span:first-of-type{border-top-right-radius:12px;border-bottom-right-radius:12px}.rtl .psdle_table *{text-align:right}.rtl tr.is_plus[id^=psdle_index_] td:last-child{border-right:none;border-left:#ffd10d 3px solid}.psdledark #sub_container{background-color:#222;color:#e7e7e7}.psdledark a.psdle_game_link{color:#e7e7e7}.psdledark .search.main.container{background-color:rgba(34,34,34,.7)}.psdledark tr{background-color:#222}.psdledark tr:nth-child(2n){background-color:#393939}</style>')},exportList:{config:[],configure:function(){$("#export_configure").remove(),0==this.config.length&&(this.config=[{property:"name",title:repod.psdle.lang.columns.name},{property:"platform",title:repod.psdle.lang.columns.platform},{property:"prettySize",title:repod.psdle.lang.columns.size},{property:"prettyDate",title:repod.psdle.lang.columns.date}]);var that=this,w=$("<div>",{id:"export_select"}).append($("<div>").append(this.genTable()));w.append($("<span class='psdle_fancy_bar'><span id='export_row_del'>-</span><span id='export_row_add'>+</span></span><span id='export_import' class='psdle_fancy_but'>"+repod.psdle.lang.strings.exportImport+"</span><br><span class='psdle_fancy_bar'><span id='sel_export_view'>"+repod.psdle.lang.labels.exportView+"</span><span id='sel_export_json'>JSON</span><span id='sel_export_csv'>CSV</span>")),$("<div />",{id:"export_configure",class:"cover"}).append($("<div />").append(w)).appendTo("#muh_games_container"),$("#export_import").on("click",function(){that.saveConfig();var resp=prompt("",JSON.stringify(that.config));if(null!==resp)try{that.config=JSON.parse(resp).filter(function(key){var valid=repod.psdle.prop_cache.indexOf(key.property)>-1;return!valid&&console.warn(key),valid})}catch(e){}that.configure()}),$("#export_row_add").off("click").on("click",function(event){$("#export_table tbody").append(that.genRow())}),$("#export_row_del").off("click").on("click",function(event){$("#export_table tr:gt(1)").last().remove()}),$("#sel_export_view").off("click").on("click",function(){that.saveConfig(),that.delimited.handle(),$("#export_configure").remove()}),$("#sel_export_csv").off("click").on("click",function(){that.saveConfig(),that.csv.handle(),$("#export_configure").remove()}),$("#sel_export_json").off("click").on("click",function(){that.saveConfig(),that.json.handle(),$("#export_configure").remove()}),$("#export_configure").off("click").one("click",function(){$(this).remove(),repod.psdle.newbox.bind("off")}),$("#export_select").off("click").on("click",function(event){event.stopPropagation()})},genTable:function(){var select=this.genSelect(),max=this.config.length||5,table=$("<table id='export_table'><tr><th>"+repod.psdle.lang.strings.exportColumnName+"</th><th>"+repod.psdle.lang.strings.exportProperty+"</th></tr>");for(i=0;i<max;i++){var target=this.config[i].property,text=this.config[i].title||"",select2=select.clone();this.config[i]&&select2.find("[value="+target+"]").attr("selected","selected"),select2=select2[0].outerHTML,table.append(this.genRow(text,select2))}return table},genRow:function(text,select){text=text||"",select=select||this.genSelect()[0].outerHTML;var row=$("<tr><td><div class='orderUp'></div><input placeholder='...?' value='"+text+"'></td><td>"+select+"</td></tr>");return $(row).find(".orderUp").click(function(){var target=$(this).parent().parent().prev(":not(:first-child)");target.length>0&&(target.before($(this).parent().parent().clone(!0)),$(this).parent().parent().remove())}),row},genSelect:function(){var select=$("<select />");return $.each(repod.psdle.prop_cache,function(i,name){select.append($("<option />",{text:name,value:name}))}),select},saveConfig:function(){var columns=[];$("#export_select").find("table tr:gt(0)").each(function(){columns.push({property:$(this).find("select option:selected").val(),title:$(this).find("input").val()})}),this.config=columns},delimited:{gen:function(sep){sep=sep||"\t";var t=repod.psdle.exportList.formatRow(sep);return $(repod.psdle.gamelist_cur).each(function(i){t+=repod.psdle.exportList.formatRow(sep,i)}),t+=repod.psdle.exportList.formatRow(sep,-1)},handle:function(){this.destroy(),$("<textarea />",{class:"search export",text:this.gen(prompt(repod.psdle.lang.strings.delimiter,"\t"))}).insertAfter(".psdleSearchStats"),repod.psdle.table.margin()},destroy:function(){$(".search.export").remove(),repod.psdle.table.margin()}},json:{gen:function(){var config=repod.psdle.exportList.config,tempjson={version:repod.psdle.version,columns:config,items:[]};return $.each(repod.psdle.gamelist_cur,function(i){var tempprop={};$.each(config,function(j,v){tempprop[v.property]=repod.psdle.exportList.format(i,v.property,"JSONExp")}),tempjson.items.push(tempprop)}),tempjson},handle:function(){repod.psdle.exportList.download(".json",JSON.stringify(this.gen()))}},csv:{gen:function(sep){sep=sep||",";var csv=repod.psdle.exportList.formatRow(sep);return $.each(repod.psdle.gamelist_cur,function(i){csv+=repod.psdle.exportList.formatRow(sep,i)}),csv+=repod.psdle.exportList.formatRow(sep,-1)},handle:function(){repod.psdle.exportList.download(".csv",this.gen())}},download:function(download,content){var blob=new Blob([content],{type:"octet/stream"});$("<a>",{download:"psdle_"+(new Date).toISOString()+(download||"_generic.txt"),href:window.URL.createObjectURL(blob)})[0].dispatchEvent(new MouseEvent("click")),window.URL.revokeObjectURL(blob)},format:function(index,target,sep){var item=repod.psdle.gamelist_cur[index],toJSON="JSONExp"==sep,yes=!!toJSON||repod.psdle.lang.strings.yes,no=!toJSON&&repod.psdle.lang.strings.no;switch(target){case"empty":return"";case"category":return repod.psdle.lang.categories[item.category]||item.category;case"platform":return repod.psdle.safeGuessSystem(item.platform);case"vitaCompat":return $.inArray("PS Vita",item.platformUsable)>-1?yes:no;case"vitatvCompat":return repod.psdle.config.check_tv&&repod.psdle.id_cache[item.productID].tvcompat&&"PS Vita"==repod.psdle.safeGuessSystem(item.platform)?yes:no;default:var temp=item[target];if(!temp)break;return"boolean"==typeof temp&&(temp=temp?yes:no),"object"==typeof temp&&(temp=toJSON?temp:JSON.stringify(temp).replace(/"/g,"'")),"string"==typeof temp&&((temp=(temp=temp.replace(/([\r\n]+?)/gm," ")).replace(/"/g,'""')).indexOf(sep)>-1||temp.indexOf('"')>-1)&&(temp='"'+temp+'"'),temp}return toJSON?void 0:""},formatRow:function(sep,index){var that=this,out="";sep=sep||",";if(index>=0){repod.psdle.gamelist_cur[index],repod.psdle.lang.strings.yes,repod.psdle.lang.strings.no;$.each(this.config,function(i,v){var target=v.property;v&&(out+=that.format(index,target,sep)+sep)}),out+="\n"}else-1==index?($.each(this.config,function(i,v){var target=v.property;out+=target+sep}),out+='"'+JSON.stringify(this.config).replace(/"/g,"'")+'"'+sep,out+=repod.psdle.version+sep):($.each(this.config,function(i,v){out+=v.title+sep}),out+="\n");return out}},game_api:{batch:[],called:0,queue:function(index,pid){var a={pid:pid,index:index};"pid_cache"==index?this.batch.push(a):this.batch.unshift(a)},run:function(burstThreads){var that=this,catalog=repod.psdle.config.valkyrieInstance.lookup("service:susuwatari");if(0==this.batch.length)return 0;this.batch.splice(0,burstThreads||3).forEach(function(i,e){catalog.resolve(i.pid).then(function(data){if(data.response&&404==data.response.status)return 0;var parse=that.parse(data),cached=repod.psdle.pid_cache.hasOwnProperty(data.id);repod.psdle.type_cache[parse.category]=!0,cached&&(repod.psdle.pid_cache[data.id]=parse);var target=repod.psdle.gamelist.find(function(i){return i.id==data.id});target.hasOwnProperty("index")&&$.extend(repod.psdle.gamelist[target.index-1],parse),that.called++}).catch(function(e){that.called++,repod.psdle.type_cache.unknown=!0}).then(function(){that.run(1),that.updateBar()})})},updateBar:function(){var l=this.called,r=repod.psdle.gamelist.length;$("#startup_progress").attr({value:l,max:r}),$("#psdle_status").text(repod.psdle.lang.startup.wait).append($("<br />")).append(l+" / "+r),l==r&&($("#psdle_status").text(repod.psdle.lang.startup.wait),$("#startup_progress").attr("value",null),this.finish())},finish:function(force){!0!==force&&this.called>0&&this.called<repod.psdle.gamelist.length||setTimeout(function(){repod.psdle.container.postList("catalog")},100)},parse:function(data){var extend={},regexClassic=/^(PS\d+)_\w+\+?$/i;return $.each([data.secondaryClassification,data.primaryClassification],function(i,v){if(regexClassic.test(v))return extend.platform=repod.psdle.safeGuessSystem(v.match(regexClassic).pop()),!1}),("required"==data.psVrCompatibility||data.metadata&&data.metadata.cn_vrRequired&&1==data.metadata.cn_vrRequired.values[0])&&(extend.platform=["PS VR"]),data.mediaList&&(extend.images=data.mediaList.screenshots.map(function(k){return k.url}).filter(function(url){return/\.(png|jpg)$/i.test(url)})),extend.baseGame=data.name||void 0,extend.category=data.topCategory||"unknown",extend.description=data.longDescription||void 0,extend.displayPrice=data.mbSkus&&data.mbSkus[0]&&data.mbSkus[0].display_price||void 0,extend.publisher=data.providerName||void 0,extend.rating=data.starRating?[data.starRating.score,data.starRating.total]:void 0,extend.releaseDate=data.releaseDate||void 0,extend.genre=data.genres.length>0&&data.genres.sort()||void 0,extend}},dlQueue:{batch:{init:function(){var that=this;this.Kamaji=repod.psdle.config.valkyrieInstance.lookup("service:kamaji/downloads"),this.Kamaji.fetchDeviceCount().then(function(a){repod.psdle.config.active_consoles={vita:a.numPSVITA>0,ps3:a.numPS3>0,ps4:a.numPS4>0},that.Kamaji.enableDownloadStatusPolling()})},send:function(index,sys,e){var that=this,Kamaji=this.Kamaji,KPlatforms=require("valkyrie-storefront/utils/const").default.KamajiPlatforms,id=repod.psdle.gamelist[index].id;switch(this.recordQueue.push({sys:sys,id:id}),sys){case"ps4":Kamaji.startPS4Download(id),e&&$(e).css({"background-color":"green"});break;case"ps3":case"vita":case"psvita":sys=("vita"==sys?"psvita":sys).toUpperCase(),Kamaji.startDRMDownload(KPlatforms[sys],id).then(function(a){that.recordProcess()}),e&&$(e).css({"background-color":"green"})}},recordQueue:[],recordProcess:function(){var Kamaji=this.Kamaji,record=this.recordQueue.splice(0,1)[0];void 0!==Kamaji.waitingDownloads[record.sys+"Downloads"].find(function(a){return a==record.id})?this.good($("[id^=dla_"+record.sys+"]")):this.bad($("[id^=dla_"+record.sys+"]"))},good:function(target){$(target).addClass("success")},bad:function(target){$(target).addClass("failure")},add:{ask:function(e){repod.psdle.newbox.open($(e).attr("id").split("_").pop())},go:function(e){repod.psdle.dlQueue.batch.send($(e).attr("id").split("_")[2],$(e).attr("id").split("_")[1])}},auto:function(e){var index=isNaN(e)?Number($(e).attr("id").split("_").pop()):Number(e),active=repod.psdle.config.active_consoles,item=repod.psdle.gamelist[index],sys=item.platformUsable;$.inArray("PS Vita",sys)>=0?sys=active.vita?"vita":!!active.ps3&&"ps3":$.inArray("PS3",sys)>=0||$.inArray("PSP",sys)>=0?sys=!!active.ps3&&"ps3":$.inArray("PS4",sys)>=0&&(sys=!!active.ps4&&"ps4"),0==sys?alert(repod.psdle.lang.strings.noTarget):$(e).data("queued")?($(e).removeData("queued").animate({"background-color":""}),this.remove.go(sys,item.id,!0)):($(e).data("queued",!0),this.send(index,sys,e))},remove:{parse:function(e){this.go($(e).children("td:eq(3)").text(),repod.psdle.gamelist[Number($(e).attr("id").split("_").pop())].id)},go:function(sys,id,auto){var cb=function(){repod.psdle.container.go("dlQueue")};"ps4"==sys?repod.psdle.dlQueue.batch.Kamaji.cancelPS4Download(id).then(cb):repod.psdle.dlQueue.batch.Kamaji.cancelDRMDownload(sys,id).then(cb)}}},generate:{bindings:function(){repod.psdle.newbox.bind("off"),$(document).one("click","#dl_list",function(){repod.psdle.table.gen()}),$(document).off("click","[id^=psdle_index_]").on("click","[id^=psdle_index_]",function(e){e.preventDefault(),repod.psdle.dlQueue.batch.remove.parse(this)})},table:function(){var temp="";$(".psdle_table").remove(),$("#sub_container").append("<div class='psdle_table'><table style='display:inline-block;text-align:left'><thead><tr><th>"+repod.psdle.lang.columns.icon+"</th><th id='sort_name'>"+repod.psdle.lang.columns.name+"</th><th>"+repod.psdle.lang.columns.platform+"</th><th> > </th><th id='sort_size'>"+repod.psdle.lang.columns.size+"</th><th id='sort_date'>"+repod.psdle.lang.columns.date+"</th></tr></thead><tbody></tbody></table></div>"),$.each(repod.psdle.dlQueue.batch.Kamaji.waitingDownloads,function(sys,items){/Downloads$/.test(sys)&&items.length>0&&$.each(repod.psdle.gamelist,function(a,b){if(items.indexOf(b.id)>=0){var c={createdTime:"?",to_sys:sys.match(/(.*?)Downloads/).pop()};temp+=repod.psdle.table_utils.gen.row(b,c)}})}),$(".psdle_table tbody").html(temp),repod.psdle.table.margin()},display:function(){this.bindings(),$("#sub_container").empty().append(repod.psdle.table.header.gen(!0)),this.table()},destroy:function(){$("#sub_container").html("")}}},table_utils:{random:function(){var r=repod.psdle.gamelist_cur[Math.floor(Math.random()*repod.psdle.gamelist_cur.length)].index-1;return repod.psdle.newbox.open(r),r},gen:{row:function(val,dlQueue){var u=repod.psdle.config.game_page+val.id,is_plus=(val.safe_icon&&val.icon,val.plus?"is_plus":""),sys=repod.psdle.safeGuessSystem(val.platform),iS=repod.psdle.config.iconSize+"px",temp="<tr id='psdle_index_"+(val.index-1)+"' class='"+is_plus+"'><td style='max-width:"+iS+";max-height:"+iS+";'><a target='_blank' href='"+val.url+"'><img title='"+repod.psdle.lang.labels.page+" "+val.dlListPage+"' class='psdle_game_icon "+is_plus+"' /></a></td><td><a class='psdle_game_link' target='_blank' href='"+u+"'>"+val.name+"</a></td>",can_vita="PS Vita"!=sys&&$.inArray("PS Vita",val.platformUsable)>-1;return can_vita=can_vita?"class='psp2'":"",temp+=dlQueue?"<td>"+sys+"</td><td>"+dlQueue.to_sys.toUpperCase().replace("VITA","PS Vita")+"</td><td>"+val.prettySize+"</td><td>"+dlQueue.createdTime+"</td>":"<td "+can_vita+">"+sys+(repod.psdle.config.check_tv&&repod.psdle.id_cache[val.productID].tvcompat&&"PS Vita"==sys?"<span class='psdletv'>TV</span>":"")+"</td><td>"+val.prettySize+"</td><td>"+val.prettyDate+"</td>",temp+="</tr>"},totals:function(){var a=0,i18n=repod.psdle.config.valkyrieInstance.lookup("service:i18n");$.each(repod.psdle.gamelist_cur,function(b,c){a+=c.size});var tempSize=require("valkyrie-storefront/utils/download").default.getFormattedFileSize(a);return"<tr id='psdle_totals'><td /><td /><td /><td>"+(a>0?i18n.t("c.page.details.drmDetails."+tempSize.unit,{val:tempSize.value}):"")+"</td><td /></tr>"}}},newbox:{generate:function(index){var plus="",game=repod.psdle.gamelist[index],id=game.index-1,icon=game.icon;dialog=$("<div>",{id:"dlQueueAsk",style:'background-image:url("'+repod.psdle.table.icons.toSize(icon,400)+'");'});try{game.plus&&(plus=$("#psdleplus").clone()[0].outerHTML+" ")}catch(e){}if(dialog.append($("<div>",{id:"dlQAN"}).append(plus+game.name)),repod.psdle.config.dlQueue){var temp=$.grep(game.platformUsable.slice(0),function(V){return"PSP"!==V}),t=$("<div>",{id:"dlQASys"});if(temp.length>1)$.each(temp,function(a,b){var c=b.replace(/ps /i,"").toLowerCase(),d=repod.psdle.config.active_consoles.hasOwnProperty(c)?"":"toggled_off";t.append($("<div>").append($("<div>",{id:"dla_"+c+"_"+id,class:d,text:b})))});else{var c=temp[0].slice(0).replace(/ps /i,"").toLowerCase(),d=repod.psdle.config.active_consoles.hasOwnProperty(c)?"":"toggled_off";t.html($("<div>").append($("<div>",{id:"dla_"+c+"_"+id,class:d,text:repod.psdle.lang.strings.queueTo.replace("$SYS$",game.platformUsable[0].slice(0))})))}dialog.append(t)}if(game.rating){var star=$("<div>",{class:"fa fa-star"})[0].outerHTML;dialog.append($("<div>",{id:"dlQARating"}).append(star+" "+game.rating[0]+" / 5 ("+game.rating[1]+")"))}dialog.append($("<div>",{id:"dlQAStat",html:repod.psdle.safeGuessSystem(game.platform)+" | <div style='display:inline'>"+game.prettySize+"</div> | "+game.prettyDate})),dialog=$("<div>",{id:"dlQueue_newbox",class:"cover"}).append($("<div>").append(dialog[0].outerHTML));var media=[];(game.images&&$.each(game.images,function(a,b){media.push({type:"image",url:b})}),media.length>0)&&("video"==(media=media[Math.floor(Math.random()*media.length)]).type&&$(dialog).prepend('<div style="z-index:-1;position:absolute;top:0px;left:0px;right:0px;bottom:0px;background-color:#000"><video style="min-height:100%;" autoplay loop muted><source src="'+game.videos[0]+'" type="video/mp4"></video></div>'),"image"==media.type&&$(dialog).css("background-image","url('"+game.images[Math.floor(Math.random()*game.images.length)]+"')"));return dialog[0].outerHTML},bind:function(e){var that=this;switch(e){case"on":default:$("#dlQueue_newbox").one("click",function(){that.close()}),$("#dlQueueAsk").on("click",function(event){event.stopPropagation()}),$("div[id^=dla_]:not('.toggled_off')").on("click",function(){repod.psdle.dlQueue.batch.add.go(this)});break;case"off":$("div[id^=dla_]").off("click"),$("#dlQueueAsk").off("click")}},open:function(index){repod.psdle.table.icons.validate(index,-1),$("#dlQueue_newbox").length&&this.close(),$("#muh_games_container").append(this.generate(index)).promise().done(function(){repod.psdle.newbox.bind()})},close:function(){$("#dlQueue_newbox").remove(),this.bind("off")}},tv:{url_cache:[],container:"",init:function(){console.log("PSDLE | Starting PS TV checks."),$.each(repod.psdle.gamelist,function(index,val){repod.psdle.id_cache[val.productID]={tvcompat:!1}}),this.detect(function(item){void 0!==item?this.container=item:console.log("PSDLE | Couldn't find TV container.")})},detect:function(cb){for(var base=repod.psdle.config.valkyrieInstance.lookup("service:storefront"),i=0;i<base.navigation.length;i++){var route=base.navigation[i];if("games"===route.routeName)for(i=0;i<route.submenu.length;i++){var sub=route.submenu[i];if(sub.targetContainerId.toLowerCase().indexOf("vita")>-1)for(i=0;i<sub.items.length;i++){var item=sub.items[i];if(item.targetContainerId.toLowerCase().indexOf("tv")>-1)return void cb(item.targetContainerId)}}}cb()},fetchList:function(){},run:function(){var that=this,url=this.url_cache.pop();url?$.getJSON(url).success(function(a){that.parse(url,a)}).fail(function(){that.run()}):repod.psdle.config.deep_search||repod.psdle.table.gen()},parse:function(url,a){var next=url.replace(/start=\d+/,"start="+(Number(url.match(/start=(\d+)/).pop())+Number(url.match(/size=(\d+)/).pop())));a.total_results&&a.start+a.size<a.total_results&&this.url_cache.push(next),$.each(a.links,function(index,val){repod.psdle.id_cache[val.id]&&(repod.psdle.id_cache[val.id].tvcompat=!0)}),this.run()}},debug:{injectEntitlement:function(ENTITLEMENT){return"object"==typeof(ENTITLEMENT=ENTITLEMENT||prompt("Enter valid Entitlement data:"))?$.each(ENTITLEMENT,function(index,value){repod.psdle.e_inject_cache.push(value)}):repod.psdle.e_inject_cache.push(JSON.parse(ENTITLEMENT)),repod.psdle.e_inject_cache.length},inject_lang:function(){var lang=prompt("Insert JSON formatted language: (current below)",JSON.stringify(repod.psdle.lang));try{(lang=JSON.parse(lang)).hasOwnProperty("def")&&(lang=lang[lang.def]),repod.psdle.lang={},repod.psdle.lang=repod.psdle.lang_cache.en.us,$.extend(!0,repod.psdle.lang,lang),repod.psdle.container.go("startup")}catch(e){alert(e)}}}},repod.psdle.config.timerID=setInterval(function(a){"undefined"!=typeof Ember&&Ember.BOOTED&&Ember.Application.NAMESPACES_BY_ID["valkyrie-storefront"]._booted&&(clearInterval(repod.psdle.config.timerID),repod.psdle.init())},500),console.log("%cPSDLE has started!","color:#2185f4;font-size:x-large;font-weight:bold;"),console.log("PSDLE | Ready.");